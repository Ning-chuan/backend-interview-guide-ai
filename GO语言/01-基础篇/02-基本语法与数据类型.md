# ç¬¬2ç« ï¼šåŸºæœ¬è¯­æ³•ä¸æ•°æ®ç±»å‹

## ç« èŠ‚æ¦‚è¦
æœ¬ç« æ·±å…¥è®²è§£GOè¯­è¨€çš„åŸºæœ¬è¯­æ³•è§„åˆ™ã€å˜é‡å£°æ˜ã€å¸¸é‡å®šä¹‰ä»¥åŠå„ç§æ•°æ®ç±»å‹çš„ç‰¹æ€§å’Œä½¿ç”¨æ–¹æ³•ã€‚é€šè¿‡ç†è®ºç»“åˆå®è·µçš„æ–¹å¼ï¼Œå¸®åŠ©è¯»è€…å»ºç«‹æ‰å®çš„GOè¯­è¨€åŸºç¡€ï¼Œå¹¶æŒæ¡å¤§å‚é¢è¯•ä¸­çš„æ ¸å¿ƒè€ƒç‚¹ã€‚

## å­¦ä¹ ç›®æ ‡
- æŒæ¡GOè¯­è¨€çš„åŸºæœ¬è¯­æ³•è§„åˆ™å’Œç¼–ç è§„èŒƒ
- æ·±å…¥ç†è§£å„ç§æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€å’Œæ€§èƒ½ç‰¹æ€§
- ç†Ÿç»ƒæŒæ¡å˜é‡å’Œå¸¸é‡çš„å£°æ˜ã€åˆå§‹åŒ–å’Œä½œç”¨åŸŸ
- ç†è§£ç±»å‹ç³»ç»Ÿã€ç±»å‹è½¬æ¢å’Œç±»å‹å®‰å…¨æœºåˆ¶
- æŒæ¡æŒ‡é’ˆçš„ä½¿ç”¨å’Œå†…å­˜ç®¡ç†åŸºç¡€
- å…·å¤‡è§£å†³ç›¸å…³é¢è¯•é¢˜çš„èƒ½åŠ›

## é‡è¦æç¤º
âš ï¸ **é¢è¯•é‡ç‚¹ï¼š** æœ¬ç« å†…å®¹æ˜¯GOè¯­è¨€é¢è¯•çš„åŸºç¡€ï¼Œç‰¹åˆ«å…³æ³¨ï¼š
- å˜é‡å£°æ˜çš„å¤šç§æ–¹å¼åŠå…¶é€‚ç”¨åœºæ™¯
- æ•°æ®ç±»å‹çš„å†…å­˜å ç”¨å’Œæ€§èƒ½å½±å“
- æŒ‡é’ˆä¸å€¼ä¼ é€’çš„åŒºåˆ«
- ç±»å‹è½¬æ¢çš„å®‰å…¨æ€§å’Œæ€§èƒ½è€ƒè™‘
- å¸¸é‡å’Œiotaçš„é«˜çº§ç”¨æ³•

## ä¸»è¦å†…å®¹

### 2.1 GOè¯­è¨€è¯­æ³•åŸºç¡€

#### 2.1.1 æºæ–‡ä»¶ç»“æ„

GOè¯­è¨€æºæ–‡ä»¶éµå¾ªä¸¥æ ¼çš„ç»“æ„è§„èŒƒï¼Œè¿™ç§è®¾è®¡ä¿è¯äº†ä»£ç çš„ä¸€è‡´æ€§å’Œå¯è¯»æ€§ï¼š

```go
// 1. åŒ…å£°æ˜ï¼ˆå¿…é¡»ï¼Œä¸”å¿…é¡»æ˜¯ç¬¬ä¸€è¡Œéæ³¨é‡Šä»£ç ï¼‰
package main

// 2. å¯¼å…¥è¯­å¥ï¼ˆå¯é€‰ï¼Œå»ºè®®æŒ‰æ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åº“ã€æœ¬åœ°åŒ…çš„é¡ºåºï¼‰
import (
    // æ ‡å‡†åº“
    "fmt"
    "strings"
    "time"
    
    // ç¬¬ä¸‰æ–¹åº“
    "github.com/gin-gonic/gin"
    
    // æœ¬åœ°åŒ…
    "myproject/utils"
)

// 3. åŒ…çº§åˆ«å£°æ˜ï¼ˆå¯é€‰ï¼ŒæŒ‰constã€varã€typeã€funcçš„é¡ºåºï¼‰
const (
    // å¸¸é‡å£°æ˜
    PI = 3.14159
    MaxRetries = 3
)

var (
    // åŒ…çº§åˆ«å˜é‡
    globalVar = "å…¨å±€å˜é‡"
    logger    *log.Logger
)

type (
    // ç±»å‹å®šä¹‰
    UserID int64
    Config struct {
        Host string
        Port int
    }
)

// 4. å‡½æ•°å®šä¹‰ï¼ˆinitå‡½æ•°ä¼šåœ¨mainä¹‹å‰è‡ªåŠ¨æ‰§è¡Œï¼‰
func init() {
    // åˆå§‹åŒ–ä»£ç 
    logger = log.New(os.Stdout, "INFO: ", log.Ldate|log.Ltime)
}

func main() {
    fmt.Println("Hello, GO!")
}

func helper() {
    // è¾…åŠ©å‡½æ•°
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- `package`å£°æ˜å¿…é¡»æ˜¯ç¬¬ä¸€è¡Œéæ³¨é‡Šä»£ç 
- `import`è¯­å¥æ”¯æŒåˆ†ç»„ï¼ŒGOä¼šè‡ªåŠ¨æ ¼å¼åŒ–å¯¼å…¥é¡ºåº
- åŒ…çº§åˆ«å£°æ˜çš„åˆå§‹åŒ–é¡ºåºï¼šå¸¸é‡ â†’ å˜é‡ â†’ initå‡½æ•° â†’ mainå‡½æ•°
- åŒä¸€åŒ…å†…çš„å¤šä¸ªæ–‡ä»¶å…±äº«åŒ…çº§åˆ«å£°æ˜

#### 2.1.2 æ ‡è¯†ç¬¦å‘½åè§„åˆ™

**1. åŸºæœ¬å‘½åè§„åˆ™**
```go
// âœ… åˆæ³•çš„æ ‡è¯†ç¬¦
var userName string      // å­—æ¯å¼€å¤´
var _private int        // ä¸‹åˆ’çº¿å¼€å¤´
var user2Name string    // åŒ…å«æ•°å­—
var ç”¨æˆ·å string        // æ”¯æŒUnicodeå­—ç¬¦

// âŒ éæ³•çš„æ ‡è¯†ç¬¦
// var 2user string     // æ•°å­—å¼€å¤´
// var user-name string // åŒ…å«è¿å­—ç¬¦
// var func string      // ä½¿ç”¨å…³é”®å­—
```

**2. å¯è§æ€§è§„åˆ™ï¼ˆé‡è¦é¢è¯•ç‚¹ï¼‰**
```go
package mypackage

// å¤§å†™å­—æ¯å¼€å¤´ï¼šå…¬å¼€ï¼ˆå¯å¯¼å‡ºåˆ°å…¶ä»–åŒ…ï¼‰
var PublicVar = "å…¬å¼€å˜é‡"
func PublicFunc() {}
type PublicStruct struct {
    PublicField  string  // å…¬å¼€å­—æ®µ
    privateField string  // ç§æœ‰å­—æ®µ
}

// å°å†™å­—æ¯å¼€å¤´ï¼šç§æœ‰ï¼ˆä»…åŒ…å†…å¯è§ï¼‰
var privateVar = "ç§æœ‰å˜é‡"
func privateFunc() {}

// ç‰¹æ®Šæƒ…å†µï¼šæ–¹æ³•æ¥æ”¶è€…
func (p *PublicStruct) PublicMethod() {}    // å…¬å¼€æ–¹æ³•
func (p *PublicStruct) privateMethod() {}   // ç§æœ‰æ–¹æ³•
```

**3. å‘½åçº¦å®šå’Œæœ€ä½³å®è·µ**
```go
// âœ… æ¨èçš„å‘½åé£æ ¼

// å˜é‡å’Œå‡½æ•°ï¼šé©¼å³°å‘½åæ³•
var userName string
var userAge int
func getUserInfo() User {}
func parseHTMLDocument() {} // ç¼©å†™è¯ä¿æŒå¤§å†™

// å¸¸é‡ï¼šé©¼å³°å‘½åæ³•ï¼ˆä¸æ¨èä¸‹åˆ’çº¿ï¼‰
const MaxRetryCount = 3
const APIVersion = "v1.0"
const HTTPTimeout = 30 * time.Second

// æ¥å£ï¼šé€šå¸¸ä»¥erç»“å°¾ï¼Œæè¿°èƒ½åŠ›
type Reader interface { Read([]byte) (int, error) }
type Writer interface { Write([]byte) (int, error) }
type Stringer interface { String() string }

// ç»“æ„ä½“ï¼šåè¯ï¼Œæè¿°å®ä½“
type User struct {}
type HTTPClient struct {}

// åŒ…åï¼šç®€çŸ­ã€å°å†™ã€å•æ•°å½¢å¼
// package user (ä¸æ˜¯users)
// package http (ä¸æ˜¯HTTP)
```

**4. ç‰¹æ®Šå‘½åæ¨¡å¼**
```go
// ç©ºç™½æ ‡è¯†ç¬¦ï¼šå¿½ç•¥è¿”å›å€¼
_, err := someFunction()

// åŒ…åˆ«åï¼šé¿å…å‘½åå†²çª
import (
    "crypto/rand"
    mathrand "math/rand"  // åˆ«å
)

// ç‚¹å¯¼å…¥ï¼šç›´æ¥ä½¿ç”¨åŒ…å†…æ ‡è¯†ç¬¦ï¼ˆä¸æ¨èï¼‰
import . "fmt"
// ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨ Println è€Œä¸æ˜¯ fmt.Println

// åŒ¿åå¯¼å…¥ï¼šä»…æ‰§è¡ŒåŒ…çš„initå‡½æ•°
import _ "github.com/lib/pq"  // æ³¨å†Œæ•°æ®åº“é©±åŠ¨
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- GOè¯­è¨€çš„å¯è§æ€§å®Œå…¨ç”±æ ‡è¯†ç¬¦é¦–å­—æ¯å¤§å°å†™å†³å®š
- åŒ…ååº”è¯¥ç®€çŸ­ã€æè¿°æ€§å¼ºï¼Œé¿å…ä¸æ ‡å‡†åº“å†²çª
- æ¥å£åé€šå¸¸æè¿°è¡Œä¸ºï¼Œç»“æ„ä½“åæè¿°å®ä½“
- ç¼©å†™è¯åœ¨æ ‡è¯†ç¬¦ä¸­åº”ä¿æŒä¸€è‡´çš„å¤§å°å†™ï¼ˆå¦‚HTTPã€URLï¼‰

#### 2.1.3 å…³é”®å­—å’Œé¢„å®šä¹‰æ ‡è¯†ç¬¦

**å…³é”®å­—ï¼ˆ25ä¸ªï¼‰- ä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ï¼š**
```go
// æ§åˆ¶æµç¨‹
break    continue   fallthrough  goto
case     default    else         if
for      range      return       switch
select

// å£°æ˜å’Œå®šä¹‰  
const    func       import       package
type     var

// å¹¶å‘ç›¸å…³
chan     defer      go

// å…¶ä»–
interface  map       struct
```

**é¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼ˆå¯ä»¥é‡æ–°å®šä¹‰ï¼Œä½†ä¸æ¨èï¼‰ï¼š**
```go
// åŸºæœ¬ç±»å‹
bool byte complex64 complex128 error float32 float64
int int8 int16 int32 int64 rune string
uint uint8 uint16 uint32 uint64 uintptr

// å¸¸é‡
true false iota nil

// å†…ç½®å‡½æ•°
append cap close complex copy delete imag len
make new panic print println real recover
```

**âš ï¸ é‡è¦æé†’ï¼š**
```go
// è™½ç„¶å¯ä»¥é‡æ–°å®šä¹‰é¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œä½†å¼ºçƒˆä¸æ¨è
func main() {
    // âŒ ä¸æ¨èï¼šé‡æ–°å®šä¹‰å†…ç½®å‡½æ•°
    len := func(s string) int { return 0 }
    
    // âŒ ä¸æ¨èï¼šé‡æ–°å®šä¹‰å†…ç½®ç±»å‹
    string := "hello"
    
    // è¿™ä¼šå¯¼è‡´åŸæœ‰åŠŸèƒ½ä¸å¯ç”¨
    // fmt.Println(len("hello"))  // é”™è¯¯ï¼šlenä¸å†æ˜¯å†…ç½®å‡½æ•°
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- GOè¯­è¨€åªæœ‰25ä¸ªå…³é”®å­—ï¼Œç›¸æ¯”å…¶ä»–è¯­è¨€è¾ƒå°‘
- é¢„å®šä¹‰æ ‡è¯†ç¬¦å¯ä»¥è¢«é‡æ–°å®šä¹‰ï¼Œä½†ä¼šè¦†ç›–åŸæœ‰åŠŸèƒ½
- `nil`æ˜¯é¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œä¸æ˜¯å…³é”®å­—
- `iota`åªèƒ½åœ¨å¸¸é‡å£°æ˜ä¸­ä½¿ç”¨

### 2.2 å˜é‡å£°æ˜ä¸åˆå§‹åŒ–

#### 2.2.1 å˜é‡å£°æ˜æ–¹å¼è¯¦è§£

**1. æ ‡å‡†å£°æ˜ï¼ˆvarå…³é”®å­—ï¼‰**
```go
// å•ä¸ªå˜é‡å£°æ˜
var name string     // å£°æ˜stringç±»å‹å˜é‡ï¼Œåˆå€¼ä¸º""
var age int         // å£°æ˜intç±»å‹å˜é‡ï¼Œåˆå€¼ä¸º0
var isActive bool   // å£°æ˜boolç±»å‹å˜é‡ï¼Œåˆå€¼ä¸ºfalse

// æ‰¹é‡å£°æ˜ï¼ˆæ¨èç”¨äºåŒ…çº§åˆ«å˜é‡ï¼‰
var (
    name     string
    age      int
    isActive bool
    count    = 100    // å¯ä»¥æ··åˆå£°æ˜å’Œåˆå§‹åŒ–
)
```

**2. å£°æ˜å¹¶åˆå§‹åŒ–**
```go
// æ˜¾å¼ç±»å‹å£°æ˜
var name string = "å¼ ä¸‰"
var age int = 25
var isActive bool = true

// ç±»å‹æ¨å¯¼ï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼‰
var name = "å¼ ä¸‰"      // æ¨å¯¼ä¸ºstring
var age = 25          // æ¨å¯¼ä¸ºint
var isActive = true   // æ¨å¯¼ä¸ºbool
var pi = 3.14         // æ¨å¯¼ä¸ºfloat64ï¼ˆé»˜è®¤æµ®ç‚¹ç±»å‹ï¼‰

// æ‰¹é‡åˆå§‹åŒ–
var name, age, isActive = "å¼ ä¸‰", 25, true
```

**3. çŸ­å˜é‡å£°æ˜ï¼ˆ:= æ“ä½œç¬¦ï¼‰**
```go
func main() {
    // åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨
    name := "å¼ ä¸‰"        // ç­‰ä»·äº var name = "å¼ ä¸‰"
    age := 25            // ç­‰ä»·äº var age = 25
    isActive := true     // ç­‰ä»·äº var isActive = true
    
    // æ‰¹é‡çŸ­å£°æ˜
    x, y, z := 1, 2, 3
    
    // æ··åˆå£°æ˜å’Œèµ‹å€¼ï¼ˆè‡³å°‘æœ‰ä¸€ä¸ªæ–°å˜é‡ï¼‰
    name, email := "æå››", "lisi@example.com"  // nameé‡æ–°èµ‹å€¼ï¼Œemailæ–°å£°æ˜
}
```

**4. å£°æ˜æ–¹å¼çš„é€‰æ‹©åŸåˆ™**
```go
package main

import "fmt"

// åŒ…çº§åˆ«å˜é‡ï¼šä½¿ç”¨varå£°æ˜
var (
    globalConfig = loadConfig()  // éœ€è¦åˆå§‹åŒ–çš„å…¨å±€å˜é‡
    logger       Logger          // å»¶è¿Ÿåˆå§‹åŒ–çš„å…¨å±€å˜é‡
)

func main() {
    // å‡½æ•°å†…éƒ¨ï¼šä¼˜å…ˆä½¿ç”¨çŸ­å£°æ˜
    name := "å¼ ä¸‰"
    age := 25
    
    // éœ€è¦æ˜ç¡®ç±»å‹æ—¶ä½¿ç”¨var
    var timeout time.Duration = 30 * time.Second
    
    // é›¶å€¼æœ‰æ„ä¹‰æ—¶ä½¿ç”¨var
    var count int  // æ˜ç¡®è¡¨ç¤ºä»0å¼€å§‹è®¡æ•°
    
    // å£°æ˜ä½†ç¨åèµ‹å€¼æ—¶ä½¿ç”¨var
    var result string
    if condition {
        result = "success"
    } else {
        result = "failure"
    }
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- `:=`åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºåŒ…çº§åˆ«å£°æ˜
- `:=`å·¦è¾¹è‡³å°‘è¦æœ‰ä¸€ä¸ªæ–°å˜é‡ï¼Œå¦åˆ™ç¼–è¯‘é”™è¯¯
- `var`å£°æ˜çš„å˜é‡æœ‰é›¶å€¼ï¼Œ`:=`å£°æ˜çš„å˜é‡å¿…é¡»åˆå§‹åŒ–
- åŒ…çº§åˆ«å˜é‡çš„åˆå§‹åŒ–é¡ºåºæŒ‰ä¾èµ–å…³ç³»ç¡®å®š

#### 2.2.2 å˜é‡çš„é›¶å€¼æœºåˆ¶

GOè¯­è¨€çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯æ‰€æœ‰å˜é‡éƒ½æœ‰æ˜ç¡®å®šä¹‰çš„é›¶å€¼ï¼Œè¿™ä¿è¯äº†ç¨‹åºçš„å®‰å…¨æ€§ï¼š

```go
package main

import "fmt"

var (
    // æ•°å€¼ç±»å‹çš„é›¶å€¼
    i    int        // 0
    i8   int8       // 0
    ui   uint       // 0
    f32  float32    // 0.0
    f64  float64    // 0.0
    c64  complex64  // (0+0i)
    
    // å¸ƒå°”ç±»å‹çš„é›¶å€¼
    b    bool       // false
    
    // å­—ç¬¦ä¸²ç±»å‹çš„é›¶å€¼
    s    string     // ""ï¼ˆç©ºå­—ç¬¦ä¸²ï¼Œä¸æ˜¯nilï¼‰
    
    // æŒ‡é’ˆç±»å‹çš„é›¶å€¼
    p    *int       // nil
    
    // å¼•ç”¨ç±»å‹çš„é›¶å€¼
    slice []int           // nilï¼ˆé•¿åº¦å’Œå®¹é‡éƒ½ä¸º0ï¼‰
    m     map[string]int  // nilï¼ˆä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦makeåˆå§‹åŒ–ï¼‰
    ch    chan int        // nilï¼ˆä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦makeåˆå§‹åŒ–ï¼‰
    
    // å‡½æ•°ç±»å‹çš„é›¶å€¼
    fn    func()          // nil
    
    // æ¥å£ç±»å‹çš„é›¶å€¼
    var err error         // nil
)

func main() {
    // é›¶å€¼çš„ä½¿ç”¨ç¤ºä¾‹
    fmt.Printf("int: %d\n", i)           // 0
    fmt.Printf("float64: %f\n", f64)     // 0.000000
    fmt.Printf("bool: %t\n", b)          // false
    fmt.Printf("string: %q\n", s)        // ""
    fmt.Printf("pointer: %v\n", p)       // <nil>
    fmt.Printf("slice: %v\n", slice)     // []
    fmt.Printf("map: %v\n", m)           // map[]
    fmt.Printf("channel: %v\n", ch)      // <nil>
    
    // é›¶å€¼çš„å®ç”¨æ€§
    var count int
    count++  // å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä»0å¼€å§‹è®¡æ•°
    fmt.Println("count:", count)  // 1
    
    var buffer string
    buffer += "hello"  // å¯ä»¥ç›´æ¥æ‹¼æ¥
    buffer += " world"
    fmt.Println("buffer:", buffer)  // "hello world"
    
    // æ³¨æ„ï¼šnilçš„sliceå¯ä»¥ç›´æ¥append
    var numbers []int
    numbers = append(numbers, 1, 2, 3)
    fmt.Println("numbers:", numbers)  // [1 2 3]
}
```

**é›¶å€¼çš„é‡è¦ç‰¹æ€§ï¼š**
```go
func demonstrateZeroValues() {
    // 1. é›¶å€¼æ˜¯å¯ç”¨çš„
    var s string
    fmt.Println(len(s))  // 0ï¼Œç©ºå­—ç¬¦ä¸²é•¿åº¦ä¸º0
    
    var slice []int
    fmt.Println(len(slice))  // 0ï¼Œnil sliceé•¿åº¦ä¸º0
    slice = append(slice, 1) // å¯ä»¥ç›´æ¥appendåˆ°nil slice
    
    // 2. é›¶å€¼æ¯”è¾ƒ
    var p1, p2 *int
    fmt.Println(p1 == p2)    // trueï¼Œéƒ½æ˜¯nil
    
    var s1, s2 string
    fmt.Println(s1 == s2)    // trueï¼Œéƒ½æ˜¯ç©ºå­—ç¬¦ä¸²
    
    // 3. é›¶å€¼çš„ç±»å‹å®‰å…¨
    var m map[string]int
    // m["key"] = 1  // è¿è¡Œæ—¶panicï¼šassignment to entry in nil map
    if m == nil {
        m = make(map[string]int)  // éœ€è¦åˆå§‹åŒ–
        m["key"] = 1
    }
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- é›¶å€¼æœºåˆ¶é¿å…äº†æœªåˆå§‹åŒ–å˜é‡çš„é—®é¢˜
- `nil`æ˜¯æŒ‡é’ˆã€sliceã€mapã€channelã€å‡½æ•°ã€æ¥å£çš„é›¶å€¼
- é›¶å€¼çš„sliceå¯ä»¥ç›´æ¥appendï¼Œä½†é›¶å€¼çš„mapä¸èƒ½ç›´æ¥èµ‹å€¼
- å­—ç¬¦ä¸²çš„é›¶å€¼æ˜¯ç©ºå­—ç¬¦ä¸²`""`ï¼Œä¸æ˜¯`nil`

#### 2.2.3 å˜é‡ä½œç”¨åŸŸè¯¦è§£

GOè¯­è¨€é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼ˆé™æ€ä½œç”¨åŸŸï¼‰ï¼Œå˜é‡çš„å¯è§æ€§ç”±å…¶å£°æ˜ä½ç½®å†³å®šï¼š

**1. åŒ…çº§åˆ«ä½œç”¨åŸŸï¼ˆPackage Scopeï¼‰**
```go
package main

import "fmt"

// åŒ…çº§åˆ«å˜é‡ï¼Œæ•´ä¸ªåŒ…å†…å¯è§
var globalVar = "å…¨å±€å˜é‡"
var packageCounter int

// åŒ…çº§åˆ«å¸¸é‡
const PackageVersion = "1.0.0"

func main() {
    fmt.Println(globalVar)     // å¯ä»¥è®¿é—®
    fmt.Println(packageCounter) // å¯ä»¥è®¿é—®
    incrementCounter()
    fmt.Println(packageCounter) // 1
}

func incrementCounter() {
    packageCounter++  // å¯ä»¥ä¿®æ”¹åŒ…çº§åˆ«å˜é‡
}
```

**2. å‡½æ•°çº§åˆ«ä½œç”¨åŸŸï¼ˆFunction Scopeï¼‰**
```go
func example() {
    // å‡½æ•°çº§åˆ«å˜é‡ï¼Œä»…åœ¨å‡½æ•°å†…å¯è§
    localVar := "å±€éƒ¨å˜é‡"
    count := 0
    
    fmt.Println(localVar)
    
    // å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼ˆé—­åŒ…ï¼‰
    increment := func() {
        count++  // æ•è·å¤–éƒ¨å˜é‡
    }
    
    increment()
    fmt.Println(count)  // 1
}

// fmt.Println(localVar)  // ç¼–è¯‘é”™è¯¯ï¼šæœªå®šä¹‰
```

**3. å—çº§åˆ«ä½œç”¨åŸŸï¼ˆBlock Scopeï¼‰**
```go
func blockScopeExample() {
    x := 1
    
    if x > 0 {
        // å—çº§åˆ«å˜é‡ï¼Œä»…åœ¨ifå—å†…å¯è§
        blockVar := "å—å˜é‡"
        y := 2
        fmt.Println(blockVar, y)
        
        // å¯ä»¥è®¿é—®å¤–å±‚å˜é‡
        fmt.Println(x)
    }
    
    // fmt.Println(blockVar)  // ç¼–è¯‘é”™è¯¯ï¼šè¶…å‡ºä½œç”¨åŸŸ
    // fmt.Println(y)         // ç¼–è¯‘é”™è¯¯ï¼šè¶…å‡ºä½œç”¨åŸŸ
    
    for i := 0; i < 3; i++ {
        // iä»…åœ¨forå¾ªç¯å†…å¯è§
        loopVar := i * 2
        fmt.Println(loopVar)
    }
    
    // fmt.Println(i)        // ç¼–è¯‘é”™è¯¯ï¼šè¶…å‡ºä½œç”¨åŸŸ
    // fmt.Println(loopVar)  // ç¼–è¯‘é”™è¯¯ï¼šè¶…å‡ºä½œç”¨åŸŸ
}
```

**4. å˜é‡é®è”½ï¼ˆVariable Shadowingï¼‰**
```go
package main

import "fmt"

var x = "package level"  // åŒ…çº§åˆ«å˜é‡

func shadowingExample() {
    fmt.Println(x)  // "package level"
    
    x := "function level"  // é®è”½åŒ…çº§åˆ«å˜é‡
    fmt.Println(x)  // "function level"
    
    {
        x := "block level"  // é®è”½å‡½æ•°çº§åˆ«å˜é‡
        fmt.Println(x)      // "block level"
    }
    
    fmt.Println(x)  // "function level"
}

func main() {
    shadowingExample()
    fmt.Println(x)  // "package level"
}
```

**5. ä½œç”¨åŸŸçš„æœ€ä½³å®è·µ**
```go
func bestPractices() {
    // âœ… å¥½çš„åšæ³•ï¼šå˜é‡å£°æ˜é è¿‘ä½¿ç”¨ä½ç½®
    if needProcessing() {
        data := loadData()  // ä»…åœ¨éœ€è¦æ—¶å£°æ˜
        processData(data)
    }
    
    // âœ… å¥½çš„åšæ³•ï¼šé™åˆ¶å˜é‡ä½œç”¨åŸŸ
    for i := 0; i < 10; i++ {
        // içš„ä½œç”¨åŸŸä»…é™äºå¾ªç¯å†…
        if i%2 == 0 {
            result := i * 2  // resultä½œç”¨åŸŸä»…é™äºifå—
            fmt.Println(result)
        }
    }
    
    // âŒ é¿å…ï¼šä¸å¿…è¦çš„å˜é‡é®è”½
    // var err error
    // if data, err := loadData(); err != nil {  // é®è”½äº†å¤–å±‚err
    //     return err
    // }
    
    // âœ… æ›´å¥½çš„åšæ³•
    data, err := loadData()
    if err != nil {
        return err
    }
    processData(data)
}
```

**6. ä½œç”¨åŸŸä¸å†…å­˜ç®¡ç†**
```go
func memoryExample() {
    // å¤§å¯¹è±¡åº”è¯¥é™åˆ¶ä½œç”¨åŸŸ
    {
        largeData := make([]byte, 1024*1024)  // 1MBæ•°æ®
        processLargeData(largeData)
        // largeDataåœ¨å—ç»“æŸåå¯ä»¥è¢«GCå›æ”¶
    }
    
    // ç»§ç»­å…¶ä»–å¤„ç†ï¼Œä¸ä¼šæŒæœ‰å¤§å¯¹è±¡çš„å¼•ç”¨
    doOtherWork()
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- GOè¯­è¨€ä½¿ç”¨è¯æ³•ä½œç”¨åŸŸï¼Œå˜é‡å¯è§æ€§åœ¨ç¼–è¯‘æ—¶ç¡®å®š
- å†…å±‚ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–å±‚å˜é‡ï¼Œä½†ä¼šé®è”½åŒåå˜é‡
- å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸ä½œç”¨åŸŸç›¸å…³ï¼Œæœ‰åŠ©äºå†…å­˜ç®¡ç†
- çŸ­å˜é‡å£°æ˜`:=`ä¼šåˆ›å»ºæ–°å˜é‡ï¼Œå¯èƒ½å¯¼è‡´æ„å¤–çš„å˜é‡é®è”½
- åˆç†æ§åˆ¶å˜é‡ä½œç”¨åŸŸæœ‰åŠ©äºä»£ç å¯è¯»æ€§å’Œæ€§èƒ½ä¼˜åŒ–

### 2.3 å¸¸é‡å®šä¹‰ä¸iotaæœºåˆ¶

#### 2.3.1 å¸¸é‡å£°æ˜è¯¦è§£

**1. åŸºæœ¬å¸¸é‡å£°æ˜**
```go
// å•ä¸ªå¸¸é‡å£°æ˜
const PI = 3.14159
const Name = "GOè¯­è¨€"
const MaxSize = 100

// æ‰¹é‡å£°æ˜ï¼ˆæ¨èï¼‰
const (
    StatusOK            = 200
    StatusNotFound      = 404
    StatusInternalError = 500
)

// å¸¸é‡è¡¨è¾¾å¼ï¼ˆç¼–è¯‘æ—¶è®¡ç®—ï¼‰
const (
    SecondsPerMinute = 60
    SecondsPerHour   = SecondsPerMinute * 60
    SecondsPerDay    = SecondsPerHour * 24
)
```

**2. ç±»å‹åŒ–å¸¸é‡ vs æ— ç±»å‹å¸¸é‡**
```go
// æ— ç±»å‹å¸¸é‡ï¼ˆæ›´çµæ´»ï¼‰
const Pi = 3.14159
const MaxCount = 100

func useUntypedConstants() {
    var f32 float32 = Pi     // OKï¼šæ— ç±»å‹å¸¸é‡å¯ä»¥èµ‹å€¼ç»™å…¼å®¹ç±»å‹
    var f64 float64 = Pi     // OK
    var i int = MaxCount     // OK
    var i64 int64 = MaxCount // OK
}

// ç±»å‹åŒ–å¸¸é‡ï¼ˆç±»å‹å›ºå®šï¼‰
const (
    TypedPi    float64 = 3.14159
    TypedCount int     = 100
)

func useTypedConstants() {
    var f32 float32 = float32(TypedPi)  // éœ€è¦æ˜¾å¼è½¬æ¢
    var f64 float64 = TypedPi           // OKï¼šç±»å‹åŒ¹é…
    var i int = TypedCount              // OKï¼šç±»å‹åŒ¹é…
    var i64 int64 = int64(TypedCount)   // éœ€è¦æ˜¾å¼è½¬æ¢
}
```

#### 2.3.2 iotaæšä¸¾å™¨æ·±åº¦è§£æ

**1. iotaåŸºæœ¬æœºåˆ¶**
```go
const (
    // iotaåœ¨æ¯ä¸ªconstå—ä¸­ä»0å¼€å§‹
    Sunday = iota    // 0
    Monday           // 1ï¼ˆéšå¼ = iotaï¼‰
    Tuesday          // 2
    Wednesday        // 3
    Thursday         // 4
    Friday           // 5
    Saturday         // 6
)

// æ–°çš„constå—ï¼Œiotaé‡æ–°ä»0å¼€å§‹
const (
    January = iota   // 0
    February         // 1
    March            // 2
)
```

**2. iotaçš„é«˜çº§ç”¨æ³•**
```go
// è·³è¿‡æŸäº›å€¼
const (
    _  = iota        // 0ï¼Œä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦è·³è¿‡
    KB = 1 << (10 * iota)  // 1 << 10 = 1024
    MB                      // 1 << 20 = 1048576
    GB                      // 1 << 30 = 1073741824
    TB                      // 1 << 40 = 1099511627776
)

// å¤æ‚è¡¨è¾¾å¼
const (
    a = iota * 2     // 0 * 2 = 0
    b                // 1 * 2 = 2
    c                // 2 * 2 = 4
    d = iota + 10    // 3 + 10 = 13
    e                // 4 + 10 = 14ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œçš„è¡¨è¾¾å¼ï¼‰
)

// ä½è¿ç®—æšä¸¾
const (
    ReadPerm = 1 << iota  // 1 << 0 = 1
    WritePerm             // 1 << 1 = 2
    ExecPerm              // 1 << 2 = 4
    AllPerm = ReadPerm | WritePerm | ExecPerm  // 7
)
```

**3. iotaçš„å®é™…åº”ç”¨åœºæ™¯**
```go
// æ–‡ä»¶æƒé™
const (
    PermRead = 1 << iota   // 1
    PermWrite              // 2
    PermExecute            // 4
)

// HTTPçŠ¶æ€ç åˆ†ç»„
const (
    StatusContinue           = 100 + iota  // 100
    StatusSwitchingProtocols               // 101
    StatusProcessing                       // 102
)

const (
    StatusOK                 = 200 + iota  // 200
    StatusCreated                          // 201
    StatusAccepted                         // 202
)

// æ—¥å¿—çº§åˆ«
type LogLevel int

const (
    LogLevelDebug LogLevel = iota  // 0
    LogLevelInfo                   // 1
    LogLevelWarn                   // 2
    LogLevelError                  // 3
    LogLevelFatal                  // 4
)

// ä¸ºæšä¸¾ç±»å‹æ·»åŠ æ–¹æ³•
func (l LogLevel) String() string {
    switch l {
    case LogLevelDebug:
        return "DEBUG"
    case LogLevelInfo:
        return "INFO"
    case LogLevelWarn:
        return "WARN"
    case LogLevelError:
        return "ERROR"
    case LogLevelFatal:
        return "FATAL"
    default:
        return "UNKNOWN"
    }
}
```

**4. iotaçš„æ³¨æ„äº‹é¡¹**
```go
const (
    a = iota  // 0
    b         // 1
    c = 100   // 100ï¼Œä¸­æ–­iota
    d         // 100ï¼Œç»§æ‰¿ä¸Šä¸€è¡Œçš„å€¼
    e = iota  // 4ï¼Œiotaç»§ç»­è®¡æ•°
    f         // 5
)

// å¤šä¸ªå¸¸é‡åœ¨åŒä¸€è¡Œ
const (
    x, y = iota, iota * 2  // x=0, y=0
    m, n                   // m=1, n=2
)
```

#### 2.3.3 å¸¸é‡çš„ç‰¹æ€§ä¸é™åˆ¶

**1. ç¼–è¯‘æ—¶ç¡®å®šæ€§**
```go
const (
    // âœ… ç¼–è¯‘æ—¶å¯ç¡®å®šçš„è¡¨è¾¾å¼
    size = len("hello")           // 5
    count = 10 * 20              // 200
    pi = 3.14159                 // æµ®ç‚¹å¸¸é‡
    name = "GO" + "è¯­è¨€"          // å­—ç¬¦ä¸²æ‹¼æ¥
    
    // âŒ è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„è¡¨è¾¾å¼
    // currentTime = time.Now()     // é”™è¯¯ï¼šå‡½æ•°è°ƒç”¨
    // randomNum = rand.Int()       // é”™è¯¯ï¼šå‡½æ•°è°ƒç”¨
    // varSize = len(variable)      // é”™è¯¯ï¼šå˜é‡é•¿åº¦
)

// å¸¸é‡è¡¨è¾¾å¼çš„è®¡ç®—ç²¾åº¦
const (
    // å¸¸é‡è¿ç®—ä½¿ç”¨ä»»æ„ç²¾åº¦
    bigNumber = 1e100                    // éå¸¸å¤§çš„æ•°
    precise = 1.0 / 3.0                 // é«˜ç²¾åº¦é™¤æ³•
    result = bigNumber * precise         // ç¼–è¯‘æ—¶è®¡ç®—
)
```

**2. æ— ç±»å‹å¸¸é‡çš„çµæ´»æ€§**
```go
const n = 100  // æ— ç±»å‹æ•´æ•°å¸¸é‡

func demonstrateUntypedConstants() {
    // æ— ç±»å‹å¸¸é‡å¯ä»¥èµ‹å€¼ç»™ä»»ä½•å…¼å®¹ç±»å‹
    var i int = n           // OK
    var i8 int8 = n         // OKï¼ˆå¦‚æœå€¼åœ¨èŒƒå›´å†…ï¼‰
    var i64 int64 = n       // OK
    var f float64 = n       // OKï¼šæ•´æ•°å¯ä»¥è½¬æ¢ä¸ºæµ®ç‚¹æ•°
    var c complex128 = n    // OKï¼šæ•´æ•°å¯ä»¥è½¬æ¢ä¸ºå¤æ•°
    
    // ä½†æœ‰èŒƒå›´é™åˆ¶
    const big = 1000
    // var small int8 = big  // é”™è¯¯ï¼š1000è¶…å‡ºint8èŒƒå›´(-128åˆ°127)
}

// æ— ç±»å‹æµ®ç‚¹å¸¸é‡
const pi = 3.14159

func useFloatConstant() {
    var f32 float32 = pi    // OKï¼šè‡ªåŠ¨è½¬æ¢
    var f64 float64 = pi    // OK
    // var i int = pi       // é”™è¯¯ï¼šæµ®ç‚¹æ•°ä¸èƒ½è‡ªåŠ¨è½¬æ¢ä¸ºæ•´æ•°
}
```

**3. å¸¸é‡çš„å†…å­˜å’Œæ€§èƒ½ç‰¹æ€§**
```go
const (
    // å¸¸é‡ä¸å ç”¨è¿è¡Œæ—¶å†…å­˜
    LargeString = "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²..." // ç¼–è¯‘æ—¶åµŒå…¥
    MagicNumber = 0x12345678              // ç¼–è¯‘æ—¶æ›¿æ¢
)

func performanceExample() {
    // å¸¸é‡ä½¿ç”¨æ—¶ç›´æ¥æ›¿æ¢ï¼Œæ— å†…å­˜åˆ†é…
    for i := 0; i < 1000000; i++ {
        _ = MagicNumber  // ç¼–è¯‘æ—¶ç›´æ¥æ›¿æ¢ä¸º0x12345678
    }
    
    // å¯¹æ¯”ï¼šå˜é‡éœ€è¦å†…å­˜è®¿é—®
    magicVar := 0x12345678
    for i := 0; i < 1000000; i++ {
        _ = magicVar  // éœ€è¦ä»å†…å­˜è¯»å–
    }
}
```

**4. å¸¸é‡çš„æœ€ä½³å®è·µ**
```go
// âœ… å¥½çš„å¸¸é‡å®šä¹‰
const (
    // ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°
    DefaultTimeout = 30 * time.Second
    MaxRetryCount  = 3
    APIVersion     = "v1.0"
    
    // åˆ†ç»„ç›¸å…³å¸¸é‡
    DatabaseConfig = struct {
        Host     string
        Port     int
        Database string
    }{
        Host:     "localhost",
        Port:     5432,
        Database: "myapp",
    }
)

// âœ… æšä¸¾å¸¸é‡çš„æœ€ä½³å®è·µ
type Status int

const (
    StatusPending Status = iota
    StatusRunning
    StatusCompleted
    StatusFailed
)

// ä¸ºæšä¸¾æ·»åŠ éªŒè¯æ–¹æ³•
func (s Status) IsValid() bool {
    return s >= StatusPending && s <= StatusFailed
}

// ä¸ºæšä¸¾æ·»åŠ å­—ç¬¦ä¸²è¡¨ç¤º
func (s Status) String() string {
    names := []string{"Pending", "Running", "Completed", "Failed"}
    if s < 0 || int(s) >= len(names) {
        return "Unknown"
    }
    return names[s]
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- å¸¸é‡åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œè¿è¡Œæ—¶ä¸å¯ä¿®æ”¹
- æ— ç±»å‹å¸¸é‡æä¾›æ›´å¥½çš„çµæ´»æ€§ï¼Œä½†æœ‰ç±»å‹è½¬æ¢é™åˆ¶
- å¸¸é‡ä¸å ç”¨è¿è¡Œæ—¶å†…å­˜ï¼Œæ€§èƒ½ä¼˜äºå˜é‡
- `iota`åªåœ¨å¸¸é‡å£°æ˜ä¸­æœ‰æ•ˆï¼Œæ¯ä¸ªconstå—é‡æ–°å¼€å§‹
- å¸¸é‡è¡¨è¾¾å¼ä½¿ç”¨ä»»æ„ç²¾åº¦ç®—æœ¯ï¼Œé¿å…æº¢å‡ºé—®é¢˜

### 2.4 åŸºæœ¬æ•°æ®ç±»å‹æ·±åº¦è§£æ

#### 2.4.1 å¸ƒå°”ç±»å‹ï¼ˆboolï¼‰

å¸ƒå°”ç±»å‹æ˜¯æœ€ç®€å•çš„æ•°æ®ç±»å‹ï¼Œåªæœ‰ä¸¤ä¸ªå€¼ï¼š`true`å’Œ`false`ã€‚

```go
// å¸ƒå°”ç±»å‹å£°æ˜å’Œåˆå§‹åŒ–
var flag bool = true
var active bool = false
var isReady bool        // é›¶å€¼ä¸ºfalse

// å¸ƒå°”è¿ç®—ç¬¦
func booleanOperations() {
    a, b := true, false
    
    // é€»è¾‘ä¸ï¼ˆ&&ï¼‰- çŸ­è·¯æ±‚å€¼
    result1 := a && b           // false
    result2 := false && someFunc() // someFunc()ä¸ä¼šè¢«è°ƒç”¨
    
    // é€»è¾‘æˆ–ï¼ˆ||ï¼‰- çŸ­è·¯æ±‚å€¼  
    result3 := a || b           // true
    result4 := true || someFunc() // someFunc()ä¸ä¼šè¢«è°ƒç”¨
    
    // é€»è¾‘éï¼ˆ!ï¼‰
    result5 := !a               // false
    result6 := !b               // true
}

// æ¯”è¾ƒè¿ç®—è¿”å›å¸ƒå°”å€¼
func comparisons() {
    age := 25
    isAdult := age >= 18        // true
    isChild := age < 13         // false
    isTeenager := age >= 13 && age < 20  // false
    
    name := "Alice"
    isEmpty := name == ""       // false
    isAlice := name == "Alice"  // true
}

// å¸ƒå°”ç±»å‹çš„å®é™…åº”ç”¨
func practicalUsage() {
    // æ¡ä»¶åˆ¤æ–­
    if isLoggedIn() && hasPermission() {
        // æ‰§è¡Œæ“ä½œ
    }
    
    // å¾ªç¯æ§åˆ¶
    running := true
    for running {
        // å¤„ç†é€»è¾‘
        if shouldStop() {
            running = false
        }
    }
    
    // å‡½æ•°è¿”å›å€¼
    success := processData()
    if !success {
        handleError()
    }
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- å¸ƒå°”ç±»å‹å ç”¨1ä¸ªå­—èŠ‚
- æ”¯æŒçŸ­è·¯æ±‚å€¼ï¼Œæé«˜æ€§èƒ½å’Œå®‰å…¨æ€§
- ä¸èƒ½ä¸å…¶ä»–ç±»å‹è¿›è¡Œéšå¼è½¬æ¢
- é›¶å€¼ä¸º`false`

#### 2.4.2 æ•°å€¼ç±»å‹è¯¦è§£

**1. æ•´æ•°ç±»å‹ç³»ç»Ÿ**
```go
import (
    "fmt"
    "math"
    "unsafe"
)

// æœ‰ç¬¦å·æ•´æ•°ç±»å‹
func signedIntegers() {
    var i8 int8 = 127                    // 8ä½ï¼š-128 åˆ° 127
    var i16 int16 = 32767                // 16ä½ï¼š-32768 åˆ° 32767  
    var i32 int32 = 2147483647           // 32ä½ï¼š-2^31 åˆ° 2^31-1
    var i64 int64 = 9223372036854775807  // 64ä½ï¼š-2^63 åˆ° 2^63-1
    
    // æŸ¥çœ‹ç±»å‹å¤§å°
    fmt.Printf("int8 size: %d bytes\n", unsafe.Sizeof(i8))   // 1
    fmt.Printf("int16 size: %d bytes\n", unsafe.Sizeof(i16)) // 2
    fmt.Printf("int32 size: %d bytes\n", unsafe.Sizeof(i32)) // 4
    fmt.Printf("int64 size: %d bytes\n", unsafe.Sizeof(i64)) // 8
    
    // æº¢å‡ºç¤ºä¾‹
    var overflow int8 = 127
    overflow++  // æº¢å‡ºå˜æˆ-128
    fmt.Printf("overflow: %d\n", overflow)
}

// æ— ç¬¦å·æ•´æ•°ç±»å‹
func unsignedIntegers() {
    var ui8 uint8 = 255                   // 8ä½ï¼š0 åˆ° 255
    var ui16 uint16 = 65535               // 16ä½ï¼š0 åˆ° 65535
    var ui32 uint32 = 4294967295          // 32ä½ï¼š0 åˆ° 2^32-1
    var ui64 uint64 = 18446744073709551615 // 64ä½ï¼š0 åˆ° 2^64-1
    
    // æ— ç¬¦å·æ•´æ•°æº¢å‡º
    var uoverflow uint8 = 255
    uoverflow++  // æº¢å‡ºå˜æˆ0
    fmt.Printf("unsigned overflow: %d\n", uoverflow)
}

// å¹³å°ç›¸å…³ç±»å‹
func platformTypes() {
    var i int = 100      // 32ä½å¹³å°4å­—èŠ‚ï¼Œ64ä½å¹³å°8å­—èŠ‚
    var ui uint = 100    // 32ä½å¹³å°4å­—èŠ‚ï¼Œ64ä½å¹³å°8å­—èŠ‚
    var ptr uintptr = 0  // å­˜å‚¨æŒ‡é’ˆçš„æ•´æ•°ç±»å‹ï¼Œä¸å¹³å°æŒ‡é’ˆå¤§å°ç›¸åŒ
    
    fmt.Printf("int size: %d bytes\n", unsafe.Sizeof(i))
    fmt.Printf("uint size: %d bytes\n", unsafe.Sizeof(ui))
    fmt.Printf("uintptr size: %d bytes\n", unsafe.Sizeof(ptr))
}

// ç±»å‹åˆ«å
func typeAliases() {
    var b byte = 255     // uint8çš„åˆ«åï¼Œå¸¸ç”¨äºå­—èŠ‚æ“ä½œ
    var r rune = 'ä¸­'    // int32çš„åˆ«åï¼Œè¡¨ç¤ºUnicodeç ç‚¹
    
    fmt.Printf("byte value: %d, char: %c\n", b, b)
    fmt.Printf("rune value: %d, char: %c\n", r, r)
    
    // runeä¸å­—ç¬¦ä¸²çš„å…³ç³»
    s := "Hello,ä¸–ç•Œ"
    for i, r := range s {
        fmt.Printf("index: %d, rune: %c, value: %d\n", i, r, r)
    }
}
```

**2. æµ®ç‚¹ç±»å‹è¯¦è§£**
```go
import "math"

func floatingPointTypes() {
    // æµ®ç‚¹ç±»å‹
    var f32 float32 = 3.14                // 32ä½IEEE 754
    var f64 float64 = 3.141592653589793   // 64ä½IEEE 754ï¼ˆé»˜è®¤ï¼‰
    
    // ç²¾åº¦æ¯”è¾ƒ
    fmt.Printf("float32: %.10f\n", f32)   // ç²¾åº¦æœ‰é™
    fmt.Printf("float64: %.15f\n", f64)   // æ›´é«˜ç²¾åº¦
    
    // ç§‘å­¦è®¡æ•°æ³•
    var big float64 = 1.23e9     // 1.23 * 10^9 = 1230000000
    var small float64 = 1.23e-9  // 1.23 * 10^-9 = 0.00000000123
    
    // ç‰¹æ®Šå€¼
    var inf = math.Inf(1)        // æ­£æ— ç©·
    var negInf = math.Inf(-1)    // è´Ÿæ— ç©·
    var nan = math.NaN()         // éæ•°å­—
    
    // ç‰¹æ®Šå€¼æ£€æµ‹
    fmt.Printf("IsInf(inf): %t\n", math.IsInf(inf, 1))
    fmt.Printf("IsNaN(nan): %t\n", math.IsNaN(nan))
    
    // æµ®ç‚¹æ•°æ¯”è¾ƒæ³¨æ„äº‹é¡¹
    a := 0.1 + 0.2
    b := 0.3
    fmt.Printf("0.1 + 0.2 == 0.3: %t\n", a == b)  // falseï¼
    
    // æ­£ç¡®çš„æµ®ç‚¹æ•°æ¯”è¾ƒ
    const epsilon = 1e-9
    fmt.Printf("abs(a-b) < epsilon: %t\n", math.Abs(a-b) < epsilon)
}
```

**3. å¤æ•°ç±»å‹è¯¦è§£**
```go
func complexTypes() {
    // å¤æ•°ç±»å‹
    var c64 complex64 = 1 + 2i      // 32ä½å®éƒ¨+32ä½è™šéƒ¨
    var c128 complex128 = 1 + 2i    // 64ä½å®éƒ¨+64ä½è™šéƒ¨ï¼ˆé»˜è®¤ï¼‰
    
    // å¤æ•°æ“ä½œ
    real := real(c128)              // å®éƒ¨ï¼š1
    imag := imag(c128)              // è™šéƒ¨ï¼š2
    c := complex(1, 2)              // æ„é€ å¤æ•°ï¼š1+2i
    
    // å¤æ•°è¿ç®—
    c1 := 1 + 2i
    c2 := 3 + 4i
    sum := c1 + c2                  // (4+6i)
    product := c1 * c2              // (-5+10i)
    
    // å¤æ•°çš„æ¨¡
    magnitude := math.Sqrt(real(c1)*real(c1) + imag(c1)*imag(c1))
    // æˆ–ä½¿ç”¨cmplxåŒ…
    // magnitude := cmplx.Abs(c1)
    
    fmt.Printf("c1: %v, c2: %v\n", c1, c2)
    fmt.Printf("sum: %v, product: %v\n", sum, product)
    fmt.Printf("magnitude of c1: %f\n", magnitude)
}
```

**4. æ•°å€¼ç±»å‹çš„æ€§èƒ½è€ƒè™‘**
```go
func performanceConsiderations() {
    // ç±»å‹é€‰æ‹©çš„æ€§èƒ½å½±å“
    
    // 1. æ•´æ•°ç±»å‹ï¼šé€‰æ‹©åˆé€‚çš„å¤§å°
    var counter int32 = 0  // å¦‚æœç¡®å®šä¸ä¼šè¶…è¿‡32ä½èŒƒå›´ï¼Œä½¿ç”¨int32æ›´èŠ‚çœå†…å­˜
    
    // 2. æµ®ç‚¹ç±»å‹ï¼šfloat64é€šå¸¸æ¯”float32æ›´å¿«ï¼ˆç°ä»£CPUä¼˜åŒ–ï¼‰
    var price float64 = 19.99  // æ¨èä½¿ç”¨float64
    
    // 3. é¿å…ä¸å¿…è¦çš„ç±»å‹è½¬æ¢
    var a int32 = 100
    var b int64 = 200
    // result := a + b  // é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…
    result := int64(a) + b  // éœ€è¦æ˜¾å¼è½¬æ¢
    
    // 4. æ‰¹é‡æ“ä½œæ—¶è€ƒè™‘å†…å­˜å¯¹é½
    type Point struct {
        X, Y float64  // 8å­—èŠ‚å¯¹é½ï¼Œæ€§èƒ½æ›´å¥½
    }
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- `int`å’Œ`uint`çš„å¤§å°ä¾èµ–äºå¹³å°ï¼ˆ32ä½æˆ–64ä½ï¼‰
- æ•´æ•°æº¢å‡ºä¼šå›ç»•ï¼Œä¸ä¼šäº§ç”Ÿé”™è¯¯
- æµ®ç‚¹æ•°æ¯”è¾ƒéœ€è¦è€ƒè™‘ç²¾åº¦é—®é¢˜
- `rune`æ˜¯`int32`çš„åˆ«åï¼Œç”¨äºUnicodeå­—ç¬¦
- å¤æ•°ç±»å‹åœ¨ç§‘å­¦è®¡ç®—ä¸­å¾ˆæœ‰ç”¨
- é€‰æ‹©åˆé€‚çš„æ•°å€¼ç±»å‹å¯ä»¥ä¼˜åŒ–å†…å­˜ä½¿ç”¨å’Œæ€§èƒ½

#### 2.4.3 å­—ç¬¦ä¸²ç±»å‹æ·±åº¦è§£æ

å­—ç¬¦ä¸²æ˜¯GOè¯­è¨€ä¸­çš„é‡è¦ç±»å‹ï¼Œå…·æœ‰ä¸å¯å˜æ€§å’ŒUTF-8ç¼–ç ç‰¹æ€§ã€‚

**1. å­—ç¬¦ä¸²çš„å†…éƒ¨ç»“æ„**
```go
// å­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­çš„è¡¨ç¤º
type StringHeader struct {
    Data uintptr  // æŒ‡å‘å­—ç¬¦ä¸²æ•°æ®çš„æŒ‡é’ˆ
    Len  int      // å­—ç¬¦ä¸²é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰
}

// å­—ç¬¦ä¸²å£°æ˜å’Œåˆå§‹åŒ–
func stringDeclaration() {
    var s1 string = "Hello, World!"  // æ˜¾å¼ç±»å‹
    var s2 = "ä½ å¥½ï¼Œä¸–ç•Œï¼"            // ç±»å‹æ¨å¯¼
    s3 := "GOè¯­è¨€"                   // çŸ­å£°æ˜
    var s4 string                    // é›¶å€¼ä¸ºç©ºå­—ç¬¦ä¸²""
    
    // åŸå§‹å­—ç¬¦ä¸²ï¼ˆåå¼•å·ï¼‰- ä¸å¤„ç†è½¬ä¹‰å­—ç¬¦
    var raw = `è¿™æ˜¯ä¸€ä¸ª
å¤šè¡Œå­—ç¬¦ä¸²
åŒ…å«\n\tç­‰"è½¬ä¹‰å­—ç¬¦"
è·¯å¾„ï¼šC:\Users\Name`
    
    // è½¬ä¹‰å­—ç¬¦ä¸²ï¼ˆåŒå¼•å·ï¼‰
    var escaped = "ç¬¬ä¸€è¡Œ\nç¬¬äºŒè¡Œ\tåˆ¶è¡¨ç¬¦\\"
    
    fmt.Printf("raw: %s\n", raw)
    fmt.Printf("escaped: %s\n", escaped)
}
```

**2. å­—ç¬¦ä¸²æ“ä½œè¯¦è§£**
```go
import (
    "fmt"
    "strings"
    "strconv"
    "unicode/utf8"
)

func stringOperations() {
    s := "Hello, ä¸–ç•Œ!"
    
    // é•¿åº¦ç›¸å…³
    byteLen := len(s)                    // å­—èŠ‚é•¿åº¦ï¼š13
    runeLen := utf8.RuneCountInString(s) // å­—ç¬¦é•¿åº¦ï¼š9
    
    // å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆå¤šç§æ–¹å¼ï¼‰
    // 1. ä½¿ç”¨+æ“ä½œç¬¦ï¼ˆç®€å•ä½†æ•ˆç‡ä½ï¼‰
    result1 := s + " GO!"
    
    // 2. ä½¿ç”¨fmt.Sprintfï¼ˆæ ¼å¼åŒ–ï¼‰
    result2 := fmt.Sprintf("%s %s", s, "GO!")
    
    // 3. ä½¿ç”¨strings.Builderï¼ˆé«˜æ•ˆï¼‰
    var builder strings.Builder
    builder.WriteString(s)
    builder.WriteString(" GO!")
    result3 := builder.String()
    
    // 4. ä½¿ç”¨strings.Joinï¼ˆæ‰¹é‡æ‹¼æ¥ï¼‰
    parts := []string{s, "GO!", "è¯­è¨€"}
    result4 := strings.Join(parts, " ")
    
    // å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°
    upper := strings.ToUpper(s)              // "HELLO, ä¸–ç•Œ!"
    lower := strings.ToLower(s)              // "hello, ä¸–ç•Œ!"
    contains := strings.Contains(s, "ä¸–ç•Œ")   // true
    hasPrefix := strings.HasPrefix(s, "Hello") // true
    hasSuffix := strings.HasSuffix(s, "!")    // true
    index := strings.Index(s, "ä¸–ç•Œ")         // 7ï¼ˆå­—èŠ‚ç´¢å¼•ï¼‰
    
    // å­—ç¬¦ä¸²åˆ†å‰²å’Œæ›¿æ¢
    fields := strings.Fields("  hello   world  ") // ["hello", "world"]
    split := strings.Split("a,b,c", ",")          // ["a", "b", "c"]
    replaced := strings.Replace(s, "ä¸–ç•Œ", "World", 1)
    replaceAll := strings.ReplaceAll(s, "l", "L")
    
    // å­—ç¬¦ä¸²ä¿®å‰ª
    trimmed := strings.TrimSpace("  hello  ")     // "hello"
    trimPrefix := strings.TrimPrefix("hello", "he") // "llo"
}
```

**3. å­—ç¬¦ä¸²éå†çš„ä¸åŒæ–¹å¼**
```go
func stringIteration() {
    s := "Hello,ä¸–ç•Œ"
    
    fmt.Printf("String: %s\n", s)
    fmt.Printf("Byte length: %d\n", len(s))
    fmt.Printf("Rune length: %d\n", utf8.RuneCountInString(s))
    
    // 1. æŒ‰å­—èŠ‚éå†ï¼ˆä¸æ¨èç”¨äºåŒ…å«éASCIIå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼‰
    fmt.Println("\næŒ‰å­—èŠ‚éå†:")
    for i := 0; i < len(s); i++ {
        fmt.Printf("byte[%d]: %d (%c)\n", i, s[i], s[i])
    }
    
    // 2. æŒ‰å­—ç¬¦éå†ï¼ˆæ¨èï¼‰- rangeè‡ªåŠ¨å¤„ç†UTF-8è§£ç 
    fmt.Println("\næŒ‰å­—ç¬¦éå†:")
    for i, r := range s {
        fmt.Printf("rune[%d]: %d (%c)\n", i, r, r)
    }
    
    // 3. æ‰‹åŠ¨UTF-8è§£ç 
    fmt.Println("\næ‰‹åŠ¨UTF-8è§£ç :")
    for i := 0; i < len(s); {
        r, size := utf8.DecodeRuneInString(s[i:])
        fmt.Printf("rune at %d: %c (size: %d)\n", i, r, size)
        i += size
    }
}
```

**4. å­—ç¬¦ä¸²ä¸å­—èŠ‚åˆ‡ç‰‡è½¬æ¢**
```go
func stringByteConversion() {
    s := "Hello,ä¸–ç•Œ"
    
    // å­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡ï¼ˆå¤åˆ¶æ•°æ®ï¼‰
    bytes := []byte(s)
    fmt.Printf("bytes: %v\n", bytes)
    
    // å­—èŠ‚åˆ‡ç‰‡è½¬å­—ç¬¦ä¸²ï¼ˆå¤åˆ¶æ•°æ®ï¼‰
    s2 := string(bytes)
    fmt.Printf("string: %s\n", s2)
    
    // é›¶æ‹·è´è½¬æ¢ï¼ˆunsafeï¼Œè°¨æ…ä½¿ç”¨ï¼‰
    import "unsafe"
    
    // å­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡ï¼ˆé›¶æ‹·è´ï¼Œåªè¯»ï¼‰
    bytesUnsafe := *(*[]byte)(unsafe.Pointer(&s))
    
    // å­—èŠ‚åˆ‡ç‰‡è½¬å­—ç¬¦ä¸²ï¼ˆé›¶æ‹·è´ï¼‰
    stringUnsafe := *(*string)(unsafe.Pointer(&bytes))
    
    // æ³¨æ„ï¼šé›¶æ‹·è´è½¬æ¢æœ‰é£é™©ï¼Œä¿®æ”¹å¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒ
}
```

**5. å­—ç¬¦ä¸²çš„æ€§èƒ½ä¼˜åŒ–**
```go
func stringPerformance() {
    // 1. é¿å…é¢‘ç¹çš„å­—ç¬¦ä¸²æ‹¼æ¥
    // âŒ ä½æ•ˆçš„æ–¹å¼
    var result string
    for i := 0; i < 1000; i++ {
        result += "hello"  // æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²
    }
    
    // âœ… é«˜æ•ˆçš„æ–¹å¼
    var builder strings.Builder
    builder.Grow(5000)  // é¢„åˆ†é…å®¹é‡
    for i := 0; i < 1000; i++ {
        builder.WriteString("hello")
    }
    result = builder.String()
    
    // 2. å­—ç¬¦ä¸²æ¯”è¾ƒä¼˜åŒ–
    s1 := "hello"
    s2 := "hello"
    // GOç¼–è¯‘å™¨ä¼šä¼˜åŒ–ç›¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œä½¿å…¶æŒ‡å‘åŒä¸€å†…å­˜åœ°å€
    fmt.Printf("s1 == s2: %t\n", s1 == s2)  // trueï¼Œä¸”å¾ˆå¿«
    
    // 3. å­å­—ç¬¦ä¸²æ“ä½œ
    original := "Hello, World!"
    sub := original[7:12]  // "World"ï¼Œå…±äº«åº•å±‚æ•°æ®
    // æ³¨æ„ï¼šå­å­—ç¬¦ä¸²ä¼šä¿æŒå¯¹åŸå­—ç¬¦ä¸²çš„å¼•ç”¨
}
```

**6. å­—ç¬¦ä¸²çš„å¸¸è§é™·é˜±**
```go
func stringPitfalls() {
    // 1. å­—ç¬¦ä¸²ä¸å¯å˜
    s := "hello"
    // s[0] = 'H'  // ç¼–è¯‘é”™è¯¯ï¼šcannot assign to s[0]
    
    // æ­£ç¡®çš„ä¿®æ”¹æ–¹å¼
    runes := []rune(s)
    runes[0] = 'H'
    s = string(runes)  // "Hello"
    
    // 2. å­—ç¬¦ä¸²ç´¢å¼•æ˜¯å­—èŠ‚ç´¢å¼•ï¼Œä¸æ˜¯å­—ç¬¦ç´¢å¼•
    s = "ä¸–ç•Œ"
    fmt.Printf("s[0]: %d\n", s[0])  // 228ï¼Œä¸æ˜¯'ä¸–'çš„Unicodeå€¼
    
    // æ­£ç¡®è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦
    r, _ := utf8.DecodeRuneInString(s)
    fmt.Printf("first rune: %c\n", r)  // ä¸–
    
    // 3. len()è¿”å›å­—èŠ‚æ•°ï¼Œä¸æ˜¯å­—ç¬¦æ•°
    fmt.Printf("len(\"ä¸–ç•Œ\"): %d\n", len("ä¸–ç•Œ"))  // 6ï¼Œä¸æ˜¯2
    fmt.Printf("rune count: %d\n", utf8.RuneCountInString("ä¸–ç•Œ"))  // 2
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œä¿®æ”¹ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²
- `len()`è¿”å›å­—èŠ‚æ•°ï¼Œ`utf8.RuneCountInString()`è¿”å›å­—ç¬¦æ•°
- `range`éå†å­—ç¬¦ä¸²æ—¶è‡ªåŠ¨å¤„ç†UTF-8è§£ç 
- å­—ç¬¦ä¸²æ‹¼æ¥æ¨èä½¿ç”¨`strings.Builder`
- å­—ç¬¦ä¸²ä¸`[]byte`è½¬æ¢ä¼šå¤åˆ¶æ•°æ®
- å­å­—ç¬¦ä¸²æ“ä½œå…±äº«åº•å±‚æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼

### 2.5 ç±»å‹è½¬æ¢ä¸ç±»å‹å®‰å…¨

#### 2.5.1 æ˜¾å¼ç±»å‹è½¬æ¢è¯¦è§£

GOè¯­è¨€é‡‡ç”¨å¼ºç±»å‹ç³»ç»Ÿï¼Œä¸æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Œæ‰€æœ‰ç±»å‹è½¬æ¢éƒ½å¿…é¡»æ˜¾å¼è¿›è¡Œï¼š

```go
import (
    "fmt"
    "strconv"
    "unsafe"
)

// åŸºæœ¬ç±»å‹è½¬æ¢
func basicTypeConversion() {
    // æ•°å€¼ç±»å‹è½¬æ¢
    var i int = 42
    var f float64 = float64(i)  // intè½¬float64
    var u uint = uint(f)        // float64è½¬uint
    var i32 int32 = int32(i)    // intè½¬int32
    
    // æ³¨æ„ï¼šè½¬æ¢å¯èƒ½å¯¼è‡´ç²¾åº¦ä¸¢å¤±æˆ–æº¢å‡º
    var bigInt int64 = 1000000000000
    var smallInt int32 = int32(bigInt)  // å¯èƒ½æº¢å‡º
    fmt.Printf("bigInt: %d, smallInt: %d\n", bigInt, smallInt)
    
    // æµ®ç‚¹æ•°è½¬æ•´æ•°ä¼šæˆªæ–­å°æ•°éƒ¨åˆ†
    var pi float64 = 3.14159
    var intPi int = int(pi)  // 3ï¼Œå°æ•°éƒ¨åˆ†è¢«æˆªæ–­
    
    // å¸ƒå°”ç±»å‹ä¸èƒ½ä¸å…¶ä»–ç±»å‹è½¬æ¢
    var b bool = true
    // var num int = int(b)  // ç¼–è¯‘é”™è¯¯
    
    // æ­£ç¡®çš„å¸ƒå°”è½¬æ¢æ–¹å¼
    var num int
    if b {
        num = 1
    } else {
        num = 0
    }
}

// å­—ç¬¦ä¸²è½¬æ¢
func stringConversion() {
    var i int = 42
    
    // âŒ é”™è¯¯ï¼šä¸èƒ½ç›´æ¥è½¬æ¢æ•°å€¼åˆ°å­—ç¬¦ä¸²
    // var s string = string(i)  // è¿™ä¼šå°†42å½“ä½œASCIIç è½¬æ¢
    
    // âœ… æ­£ç¡®çš„æ•°å€¼åˆ°å­—ç¬¦ä¸²è½¬æ¢
    var s1 string = fmt.Sprintf("%d", i)     // "42"
    var s2 string = strconv.Itoa(i)          // "42"ï¼Œæ›´é«˜æ•ˆ
    var s3 string = strconv.FormatInt(int64(i), 10) // "42"
    
    // æµ®ç‚¹æ•°åˆ°å­—ç¬¦ä¸²
    var f float64 = 3.14159
    var fs1 string = fmt.Sprintf("%.2f", f)  // "3.14"
    var fs2 string = strconv.FormatFloat(f, 'f', 2, 64) // "3.14"
    
    // å­—ç¬¦ä¸²åˆ°æ•°å€¼è½¬æ¢
    var str = "123"
    num, err := strconv.Atoi(str)           // å­—ç¬¦ä¸²è½¬int
    if err != nil {
        fmt.Printf("è½¬æ¢é”™è¯¯: %v\n", err)
    }
    
    // æ›´å¤šå­—ç¬¦ä¸²è½¬æ¢å‡½æ•°
    i64, err := strconv.ParseInt("123", 10, 64)     // å­—ç¬¦ä¸²è½¬int64
    ui64, err := strconv.ParseUint("123", 10, 64)   // å­—ç¬¦ä¸²è½¬uint64
    f64, err := strconv.ParseFloat("3.14", 64)      // å­—ç¬¦ä¸²è½¬float64
    b, err := strconv.ParseBool("true")             // å­—ç¬¦ä¸²è½¬bool
}

// å­—ç¬¦å’Œå­—ç¬¦ä¸²è½¬æ¢
func runeStringConversion() {
    // å­—ç¬¦ï¼ˆruneï¼‰ä¸å­—ç¬¦ä¸²è½¬æ¢
    var r rune = 'ä¸­'
    var s string = string(r)        // runeè½¬å­—ç¬¦ä¸²ï¼š"ä¸­"
    
    // å­—ç¬¦ä¸²è½¬runeåˆ‡ç‰‡
    str := "Hello,ä¸–ç•Œ"
    runes := []rune(str)            // []rune{'H','e','l','l','o',',','ä¸–','ç•Œ'}
    
    // runeåˆ‡ç‰‡è½¬å­—ç¬¦ä¸²
    newStr := string(runes)         // "Hello,ä¸–ç•Œ"
    
    // å­—èŠ‚åˆ‡ç‰‡ä¸å­—ç¬¦ä¸²è½¬æ¢
    bytes := []byte(str)            // UTF-8å­—èŠ‚åºåˆ—
    strFromBytes := string(bytes)   // å­—èŠ‚åˆ‡ç‰‡è½¬å­—ç¬¦ä¸²
    
    fmt.Printf("åŸå­—ç¬¦ä¸²: %s\n", str)
    fmt.Printf("runeåˆ‡ç‰‡: %v\n", runes)
    fmt.Printf("å­—èŠ‚åˆ‡ç‰‡: %v\n", bytes)
}
```

#### 2.5.2 ç±»å‹æ–­è¨€ä¸æ¥å£è½¬æ¢

ç±»å‹æ–­è¨€ç”¨äºä»æ¥å£ç±»å‹ä¸­æå–å…·ä½“ç±»å‹çš„å€¼ï¼Œæ˜¯GOè¯­è¨€ç±»å‹ç³»ç»Ÿçš„é‡è¦ç‰¹æ€§ï¼š

```go
import (
    "fmt"
    "reflect"
)

// åŸºæœ¬ç±»å‹æ–­è¨€
func basicTypeAssertion() {
    var i interface{} = "hello"
    
    // 1. ç›´æ¥ç±»å‹æ–­è¨€ï¼ˆå¯èƒ½panicï¼‰
    s := i.(string)        // æ–­è¨€iæ˜¯stringç±»å‹
    fmt.Println(s)         // "hello"
    
    // å¦‚æœæ–­è¨€å¤±è´¥ä¼španic
    // num := i.(int)      // panic: interface conversion: interface {} is string, not int
    
    // 2. å®‰å…¨çš„ç±»å‹æ–­è¨€ï¼ˆæ¨èï¼‰
    s, ok := i.(string)
    if ok {
        fmt.Println("è½¬æ¢æˆåŠŸ:", s)
    } else {
        fmt.Println("è½¬æ¢å¤±è´¥")
    }
    
    // 3. æ£€æŸ¥å¤šç§ç±»å‹
    num, ok := i.(int)
    if !ok {
        fmt.Println("ä¸æ˜¯intç±»å‹")
    }
}

// ç±»å‹é€‰æ‹©ï¼ˆType Switchï¼‰
func typeSwitch() {
    var values []interface{} = []interface{}{
        42,
        "hello",
        3.14,
        true,
        []int{1, 2, 3},
        map[string]int{"a": 1},
        nil,
    }
    
    for _, v := range values {
        switch val := v.(type) {
        case nil:
            fmt.Println("nilå€¼")
        case bool:
            fmt.Printf("å¸ƒå°”å€¼: %t\n", val)
        case int:
            fmt.Printf("æ•´æ•°: %d\n", val)
        case string:
            fmt.Printf("å­—ç¬¦ä¸²: %s\n", val)
        case float64:
            fmt.Printf("æµ®ç‚¹æ•°: %.2f\n", val)
        case []int:
            fmt.Printf("æ•´æ•°åˆ‡ç‰‡: %v\n", val)
        case map[string]int:
            fmt.Printf("å­—ç¬¦ä¸²åˆ°æ•´æ•°çš„æ˜ å°„: %v\n", val)
        default:
            fmt.Printf("æœªçŸ¥ç±»å‹: %T, å€¼: %v\n", val, val)
        }
    }
}

// æ¥å£ç±»å‹æ–­è¨€
func interfaceAssertion() {
    // å®šä¹‰æ¥å£
    type Speaker interface {
        Speak() string
    }
    
    type Writer interface {
        Write(string) error
    }
    
    type Person struct {
        Name string
    }
    
    func (p Person) Speak() string {
        return "Hello, I'm " + p.Name
    }
    
    func (p Person) Write(content string) error {
        fmt.Printf("%s writes: %s\n", p.Name, content)
        return nil
    }
    
    // åˆ›å»ºå®ä¾‹
    person := Person{Name: "Alice"}
    var speaker Speaker = person
    
    // ä»æ¥å£æ–­è¨€åˆ°å…·ä½“ç±»å‹
    if p, ok := speaker.(Person); ok {
        fmt.Printf("Person: %+v\n", p)
    }
    
    // ä»ä¸€ä¸ªæ¥å£æ–­è¨€åˆ°å¦ä¸€ä¸ªæ¥å£
    if writer, ok := speaker.(Writer); ok {
        writer.Write("Hello World")
    }
    
    // æ£€æŸ¥æ¥å£æ˜¯å¦å®ç°äº†æŸä¸ªæ–¹æ³•
    if _, ok := speaker.(Writer); ok {
        fmt.Println("Speakerä¹Ÿå®ç°äº†Writeræ¥å£")
    }
}

// ç©ºæ¥å£çš„ä½¿ç”¨
func emptyInterface() {
    // ç©ºæ¥å£å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼
    var anything interface{}
    
    anything = 42
    fmt.Printf("å­˜å‚¨æ•´æ•°: %v, ç±»å‹: %T\n", anything, anything)
    
    anything = "hello"
    fmt.Printf("å­˜å‚¨å­—ç¬¦ä¸²: %v, ç±»å‹: %T\n", anything, anything)
    
    anything = []int{1, 2, 3}
    fmt.Printf("å­˜å‚¨åˆ‡ç‰‡: %v, ç±»å‹: %T\n", anything, anything)
    
    // ä½¿ç”¨åå°„è·å–ç±»å‹ä¿¡æ¯
    t := reflect.TypeOf(anything)
    v := reflect.ValueOf(anything)
    fmt.Printf("åå°„ç±»å‹: %v, åå°„å€¼: %v\n", t, v)
}

// ç±»å‹æ–­è¨€çš„æ€§èƒ½è€ƒè™‘
func performanceConsiderations() {
    var i interface{} = 42
    
    // ç±»å‹æ–­è¨€æœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€
    // åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­ï¼Œå°½é‡é¿å…é¢‘ç¹çš„ç±»å‹æ–­è¨€
    
    // âœ… å¥½çš„åšæ³•ï¼šä¸€æ¬¡æ–­è¨€ï¼Œå¤šæ¬¡ä½¿ç”¨
    if num, ok := i.(int); ok {
        result1 := num * 2
        result2 := num + 10
        fmt.Printf("ç»“æœ: %d, %d\n", result1, result2)
    }
    
    // âŒ é¿å…ï¼šé‡å¤æ–­è¨€
    // result1 := i.(int) * 2
    // result2 := i.(int) + 10
}

// ç±»å‹æ–­è¨€çš„å¸¸è§é™·é˜±
func typeAssertionPitfalls() {
    // 1. æ–­è¨€nilæ¥å£ä¼španic
    var i interface{}
    // s := i.(string)  // panic: interface conversion: interface is nil, not string
    
    // æ­£ç¡®çš„åšæ³•
    if i != nil {
        if s, ok := i.(string); ok {
            fmt.Println(s)
        }
    }
    
    // 2. æ–­è¨€åˆ°æŒ‡é’ˆç±»å‹
    var p *int = new(int)
    *p = 42
    var iface interface{} = p
    
    // æ–­è¨€åˆ°æŒ‡é’ˆç±»å‹
    if ptr, ok := iface.(*int); ok {
        fmt.Printf("æŒ‡é’ˆå€¼: %d\n", *ptr)
    }
    
    // 3. ç±»å‹æ–­è¨€ä¸ç±»å‹è½¬æ¢çš„åŒºåˆ«
    var num interface{} = 42
    
    // ç±»å‹æ–­è¨€ï¼šæ£€æŸ¥æ¥å£ä¸­å­˜å‚¨çš„å…·ä½“ç±»å‹
    if i, ok := num.(int); ok {
        fmt.Printf("æ–­è¨€æˆåŠŸ: %d\n", i)
    }
    
    // ç±»å‹è½¬æ¢ï¼šæ”¹å˜å€¼çš„ç±»å‹
    if i, ok := num.(int); ok {
        f := float64(i)  // ç±»å‹è½¬æ¢
        fmt.Printf("è½¬æ¢å: %f\n", f)
    }
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- ç±»å‹æ–­è¨€åªèƒ½ç”¨äºæ¥å£ç±»å‹
- ä½¿ç”¨`value, ok := interface.(Type)`å½¢å¼é¿å…panic
- ç±»å‹é€‰æ‹©`switch`æ˜¯å¤„ç†å¤šç§ç±»å‹çš„ä¼˜é›…æ–¹å¼
- ç©ºæ¥å£`interface{}`å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼
- ç±»å‹æ–­è¨€æœ‰æ€§èƒ½å¼€é”€ï¼Œé¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹ä½¿ç”¨
- ç±»å‹æ–­è¨€æ£€æŸ¥çš„æ˜¯æ¥å£ä¸­å­˜å‚¨çš„å…·ä½“ç±»å‹ï¼Œä¸æ˜¯ç±»å‹å…¼å®¹æ€§

### 2.6 æŒ‡é’ˆç±»å‹ä¸å†…å­˜ç®¡ç†

#### 2.6.1 æŒ‡é’ˆåŸºç¡€ä¸å†…å­˜æ¨¡å‹

GOè¯­è¨€çš„æŒ‡é’ˆæä¾›äº†ç›´æ¥å†…å­˜è®¿é—®èƒ½åŠ›ï¼Œä½†æ¯”C/C++æ›´å®‰å…¨ï¼š

```go
import (
    "fmt"
    "unsafe"
)

// æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ
func pointerBasics() {
    var x int = 42
    var p *int = &x    // pæ˜¯æŒ‡å‘xçš„æŒ‡é’ˆ
    
    fmt.Printf("xçš„å€¼: %d\n", x)           // 42
    fmt.Printf("xçš„åœ°å€: %p\n", &x)        // å†…å­˜åœ°å€ï¼Œå¦‚ï¼š0xc000014098
    fmt.Printf("pçš„å€¼(åœ°å€): %p\n", p)      // åŒä¸Šï¼ŒæŒ‡é’ˆå­˜å‚¨çš„æ˜¯åœ°å€
    fmt.Printf("pæŒ‡å‘çš„å€¼: %d\n", *p)       // 42ï¼Œè§£å¼•ç”¨æ“ä½œ
    fmt.Printf("pè‡ªèº«çš„åœ°å€: %p\n", &p)     // æŒ‡é’ˆå˜é‡è‡ªèº«çš„åœ°å€
    
    // é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼
    *p = 100
    fmt.Printf("ä¿®æ”¹åxçš„å€¼: %d\n", x)      // 100
    
    // æŒ‡é’ˆçš„å¤§å°ï¼ˆå¹³å°ç›¸å…³ï¼‰
    fmt.Printf("æŒ‡é’ˆå¤§å°: %d bytes\n", unsafe.Sizeof(p))
}

// æŒ‡é’ˆç±»å‹ç³»ç»Ÿ
func pointerTypes() {
    var i int = 42
    var f float64 = 3.14
    var s string = "hello"
    
    // ä¸åŒç±»å‹çš„æŒ‡é’ˆ
    var pi *int = &i
    var pf *float64 = &f
    var ps *string = &s
    
    fmt.Printf("intæŒ‡é’ˆ: %T, å€¼: %p\n", pi, pi)
    fmt.Printf("float64æŒ‡é’ˆ: %T, å€¼: %p\n", pf, pf)
    fmt.Printf("stringæŒ‡é’ˆ: %T, å€¼: %p\n", ps, ps)
    
    // æŒ‡é’ˆç±»å‹ä¸èƒ½ç›¸äº’èµ‹å€¼
    // pi = pf  // ç¼–è¯‘é”™è¯¯ï¼šcannot use pf (type *float64) as type *int
    
    // ä½†å¯ä»¥è½¬æ¢ä¸ºunsafe.Pointer
    var unsafePtr unsafe.Pointer = unsafe.Pointer(pi)
    var pi2 *int = (*int)(unsafePtr)
    fmt.Printf("é€šè¿‡unsafe.Pointerè½¬æ¢: %d\n", *pi2)
}
```

#### 2.6.2 æŒ‡é’ˆçš„é›¶å€¼ä¸å†…å­˜åˆ†é…

```go
// æŒ‡é’ˆçš„é›¶å€¼å’Œåˆå§‹åŒ–
func pointerZeroValue() {
    var p *int
    fmt.Printf("é›¶å€¼æŒ‡é’ˆ: %v\n", p)     // <nil>
    
    // æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºnil
    if p == nil {
        fmt.Println("æŒ‡é’ˆä¸ºç©ºï¼Œéœ€è¦åˆå§‹åŒ–")
    }
    
    // æ–¹æ³•1ï¼šä½¿ç”¨newå‡½æ•°åˆ†é…å†…å­˜
    p = new(int)       // åˆ†é…intç±»å‹çš„å†…å­˜ï¼Œè¿”å›æŒ‡é’ˆ
    *p = 42
    fmt.Printf("newåˆ†é…: %d\n", *p)    // 42
    
    // æ–¹æ³•2ï¼šè·å–ç°æœ‰å˜é‡çš„åœ°å€
    var x int = 100
    p = &x
    fmt.Printf("åœ°å€è·å–: %d\n", *p)   // 100
    
    // æ–¹æ³•3ï¼šä½¿ç”¨å­—é¢é‡ï¼ˆä»…é€‚ç”¨äºç»“æ„ä½“ç­‰å¤åˆç±»å‹ï¼‰
    type Point struct{ X, Y int }
    pp := &Point{X: 1, Y: 2}
    fmt.Printf("å­—é¢é‡: %+v\n", *pp)   // {X:1 Y:2}
}

// æŒ‡é’ˆä¸å†…å­˜åˆ†é…
func memoryAllocation() {
    // æ ˆåˆ†é… vs å †åˆ†é…
    
    // å±€éƒ¨å˜é‡é€šå¸¸åœ¨æ ˆä¸Šåˆ†é…
    func stackAllocation() *int {
        x := 42  // å±€éƒ¨å˜é‡
        return &x  // è¿”å›å±€éƒ¨å˜é‡åœ°å€ï¼ŒGOä¼šè‡ªåŠ¨ç§»åˆ°å †ä¸Š
    }
    
    // ä½¿ç”¨newæ˜¾å¼å †åˆ†é…
    func heapAllocation() *int {
        return new(int)  // åœ¨å †ä¸Šåˆ†é…
    }
    
    p1 := stackAllocation()
    p2 := heapAllocation()
    
    *p1 = 100
    *p2 = 200
    
    fmt.Printf("æ ˆè½¬å †: %d\n", *p1)
    fmt.Printf("å †åˆ†é…: %d\n", *p2)
    
    // GOçš„åƒåœ¾å›æ”¶å™¨ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜
    // ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾
}
```

#### 2.6.3 æŒ‡é’ˆä¸å‡½æ•°å‚æ•°

```go
// å€¼ä¼ é€’ vs æŒ‡é’ˆä¼ é€’
func parameterPassing() {
    // å€¼ä¼ é€’ï¼šå¤åˆ¶å€¼
    func incrementValue(x int) {
        x++  // åªä¿®æ”¹å‰¯æœ¬
        fmt.Printf("å‡½æ•°å†…x: %d\n", x)
    }
    
    // æŒ‡é’ˆä¼ é€’ï¼šä¼ é€’åœ°å€
    func incrementPointer(x *int) {
        *x++  // ä¿®æ”¹åŸå§‹å€¼
        fmt.Printf("å‡½æ•°å†…*x: %d\n", *x)
    }
    
    // å¼•ç”¨ä¼ é€’ï¼ˆå¯¹äºsliceã€mapã€channelï¼‰
    func modifySlice(s []int) {
        s[0] = 999  // ä¿®æ”¹åº•å±‚æ•°ç»„
    }
    
    // æµ‹è¯•å€¼ä¼ é€’
    a := 10
    fmt.Printf("è°ƒç”¨å‰a: %d\n", a)
    incrementValue(a)
    fmt.Printf("è°ƒç”¨åa: %d\n", a)  // 10ï¼Œæœªæ”¹å˜
    
    // æµ‹è¯•æŒ‡é’ˆä¼ é€’
    fmt.Printf("è°ƒç”¨å‰a: %d\n", a)
    incrementPointer(&a)
    fmt.Printf("è°ƒç”¨åa: %d\n", a)  // 11ï¼Œå·²æ”¹å˜
    
    // æµ‹è¯•sliceï¼ˆå¼•ç”¨ç±»å‹ï¼‰
    slice := []int{1, 2, 3}
    fmt.Printf("è°ƒç”¨å‰slice: %v\n", slice)
    modifySlice(slice)
    fmt.Printf("è°ƒç”¨åslice: %v\n", slice)  // [999, 2, 3]
}

// æŒ‡é’ˆä½œä¸ºè¿”å›å€¼
func pointerReturn() {
    // è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆ
    func createInt() *int {
        x := 42
        return &x  // GOä¼šè‡ªåŠ¨å°†xç§»åˆ°å †ä¸Š
    }
    
    // è¿”å›newåˆ†é…çš„æŒ‡é’ˆ
    func createIntNew() *int {
        return new(int)
    }
    
    // å·¥å‚å‡½æ•°æ¨¡å¼
    func createPerson(name string, age int) *Person {
        return &Person{
            Name: name,
            Age:  age,
        }
    }
    
    type Person struct {
        Name string
        Age  int
    }
    
    p1 := createInt()
    p2 := createIntNew()
    p3 := createPerson("Alice", 30)
    
    *p1 = 100
    *p2 = 200
    
    fmt.Printf("p1: %d\n", *p1)
    fmt.Printf("p2: %d\n", *p2)
    fmt.Printf("p3: %+v\n", *p3)
}
```

#### 2.6.4 æŒ‡é’ˆçš„é«˜çº§ç”¨æ³•

```go
// æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ
func advancedPointers() {
    // æŒ‡é’ˆæ•°ç»„ï¼šæ•°ç»„çš„å…ƒç´ æ˜¯æŒ‡é’ˆ
    var ptrArray [3]*int
    x, y, z := 1, 2, 3
    ptrArray[0] = &x
    ptrArray[1] = &y
    ptrArray[2] = &z
    
    fmt.Println("æŒ‡é’ˆæ•°ç»„:")
    for i, ptr := range ptrArray {
        fmt.Printf("ptrArray[%d] = %d\n", i, *ptr)
    }
    
    // æ•°ç»„æŒ‡é’ˆï¼šæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ
    arr := [3]int{10, 20, 30}
    var arrPtr *[3]int = &arr
    
    fmt.Println("æ•°ç»„æŒ‡é’ˆ:")
    for i, val := range *arrPtr {
        fmt.Printf("(*arrPtr)[%d] = %d\n", i, val)
    }
    
    // ä¹Ÿå¯ä»¥è¿™æ ·è®¿é—®
    fmt.Printf("arrPtr[0] = %d\n", arrPtr[0])  // GOè‡ªåŠ¨è§£å¼•ç”¨
}

// æŒ‡é’ˆä¸ç»“æ„ä½“
func pointerStruct() {
    type Person struct {
        Name string
        Age  int
    }
    
    // ç»“æ„ä½“æŒ‡é’ˆ
    p := &Person{Name: "Alice", Age: 30}
    
    // è®¿é—®ç»“æ„ä½“å­—æ®µï¼ˆGOè‡ªåŠ¨è§£å¼•ç”¨ï¼‰
    fmt.Printf("å§“å: %s\n", p.Name)      // ç­‰ä»·äº (*p).Name
    fmt.Printf("å¹´é¾„: %d\n", p.Age)       // ç­‰ä»·äº (*p).Age
    
    // ä¿®æ”¹å­—æ®µ
    p.Age = 31
    fmt.Printf("ä¿®æ”¹åå¹´é¾„: %d\n", p.Age)
    
    // æ–¹æ³•è°ƒç”¨
    func (p *Person) Birthday() {
        p.Age++
    }
    
    p.Birthday()
    fmt.Printf("ç”Ÿæ—¥åå¹´é¾„: %d\n", p.Age)
}

// æŒ‡é’ˆçš„æ€§èƒ½è€ƒè™‘
func pointerPerformance() {
    type LargeStruct struct {
        Data [1000]int
    }
    
    // å€¼ä¼ é€’ï¼šå¤åˆ¶æ•´ä¸ªç»“æ„ä½“ï¼ˆä½æ•ˆï¼‰
    func processValue(ls LargeStruct) {
        // å¤„ç†æ•°æ®...
        _ = ls.Data[0]
    }
    
    // æŒ‡é’ˆä¼ é€’ï¼šåªä¼ é€’åœ°å€ï¼ˆé«˜æ•ˆï¼‰
    func processPointer(ls *LargeStruct) {
        // å¤„ç†æ•°æ®...
        _ = ls.Data[0]
    }
    
    large := LargeStruct{}
    
    // å¯¹äºå¤§å‹ç»“æ„ä½“ï¼ŒæŒ‡é’ˆä¼ é€’æ›´é«˜æ•ˆ
    processValue(large)   // å¤åˆ¶4000å­—èŠ‚
    processPointer(&large) // åªä¼ é€’8å­—èŠ‚åœ°å€ï¼ˆ64ä½ç³»ç»Ÿï¼‰
}
```

#### 2.6.5 æŒ‡é’ˆçš„å®‰å…¨æ€§ä¸é™åˆ¶

```go
// GOæŒ‡é’ˆçš„å®‰å…¨ç‰¹æ€§
func pointerSafety() {
    // 1. ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—
    var arr [5]int = [5]int{1, 2, 3, 4, 5}
    p := &arr[0]
    
    // p++  // ç¼–è¯‘é”™è¯¯ï¼šinvalid operation
    // p = p + 1  // ç¼–è¯‘é”™è¯¯
    
    // 2. ä¸èƒ½å°†ä»»æ„æ•°å€¼è½¬æ¢ä¸ºæŒ‡é’ˆ
    // var p2 *int = (*int)(0x12345)  // ç¼–è¯‘é”™è¯¯
    
    // 3. ä¸åŒç±»å‹çš„æŒ‡é’ˆä¸èƒ½ç›¸äº’è½¬æ¢
    var i int = 42
    var f float64 = 3.14
    pi := &i
    pf := &f
    
    // pi = pf  // ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…
    
    // 4. ä½†å¯ä»¥é€šè¿‡unsafeåŒ…è¿›è¡Œä¸å®‰å…¨æ“ä½œï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
    import "unsafe"
    
    unsafePtr := unsafe.Pointer(pi)
    pf2 := (*float64)(unsafePtr)  // å±é™©æ“ä½œ
    _ = pf2
    
    fmt.Println("GOæŒ‡é’ˆæ˜¯ç±»å‹å®‰å…¨çš„")
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- GOæŒ‡é’ˆä¸æ”¯æŒç®—æœ¯è¿ç®—ï¼Œæ¯”C/C++æ›´å®‰å…¨
- æŒ‡é’ˆçš„é›¶å€¼æ˜¯`nil`ï¼Œä½¿ç”¨å‰éœ€è¦æ£€æŸ¥
- å‡½æ•°å‚æ•°ä¼ é€’ï¼šå€¼ä¼ é€’å¤åˆ¶æ•°æ®ï¼ŒæŒ‡é’ˆä¼ é€’å…±äº«æ•°æ®
- GOä¼šè‡ªåŠ¨è¿›è¡Œé€ƒé€¸åˆ†æï¼Œå†³å®šå˜é‡åˆ†é…åœ¨æ ˆè¿˜æ˜¯å †
- å¤§å‹ç»“æ„ä½“å»ºè®®ä½¿ç”¨æŒ‡é’ˆä¼ é€’ä»¥æé«˜æ€§èƒ½
- `new(T)`åˆ†é…é›¶å€¼å†…å­˜å¹¶è¿”å›æŒ‡é’ˆ
- æŒ‡é’ˆç±»å‹æ˜¯å¼ºç±»å‹çš„ï¼Œä¸åŒç±»å‹æŒ‡é’ˆä¸èƒ½ç›´æ¥è½¬æ¢

### 2.7 ç±»å‹åˆ«åä¸è‡ªå®šä¹‰ç±»å‹

#### 2.7.1 ç±»å‹åˆ«åè¯¦è§£

ç±»å‹åˆ«åä¸ºç°æœ‰ç±»å‹æä¾›æ–°çš„åç§°ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯åŒä¸€ç±»å‹ï¼š

```go
import "fmt"

// ç±»å‹åˆ«åï¼ˆGO 1.9+å¼•å…¥ï¼‰
type MyString = string
type MyInt = int
type MyFloat = float64

func typeAliasDemo() {
    var s MyString = "hello"
    var i MyInt = 42
    var f MyFloat = 3.14
    
    // åˆ«åä¸åŸç±»å‹å®Œå…¨ç›¸åŒï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼
    var s2 string = s   // OKï¼Œæ— éœ€è½¬æ¢
    var i2 int = i      // OKï¼Œæ— éœ€è½¬æ¢
    var f2 float64 = f  // OKï¼Œæ— éœ€è½¬æ¢
    
    // åå‘èµ‹å€¼ä¹Ÿå¯ä»¥
    s = "world"
    i = 100
    f = 2.71
    
    fmt.Printf("ç±»å‹åˆ«å: %T, %T, %T\n", s, i, f)  // string, int, float64
    
    // ç±»å‹åˆ«åçš„å®é™…åº”ç”¨
    type Byte = uint8  // æ ‡å‡†åº“ä¸­çš„ä¾‹å­
    type Rune = int32  // æ ‡å‡†åº“ä¸­çš„ä¾‹å­
}

// ç±»å‹åˆ«åçš„ä½¿ç”¨åœºæ™¯
func typeAliasUseCases() {
    // 1. ç®€åŒ–å¤æ‚ç±»å‹å
    type Handler = func(http.ResponseWriter, *http.Request)
    type StringMap = map[string]string
    type IntSlice = []int
    
    // 2. å…¼å®¹æ€§ï¼šé‡æ„æ—¶ä¿æŒAPIå…¼å®¹
    // å‡è®¾åŸæ¥æœ‰ä¸€ä¸ªç±»å‹
    type OldConfigType struct {
        Host string
        Port int
    }
    
    // é‡æ„åæ”¹åï¼Œä½†ä¿æŒå…¼å®¹
    type Config struct {
        Host string
        Port int
    }
    type OldConfigType = Config  // ç±»å‹åˆ«åä¿æŒå…¼å®¹æ€§
    
    // 3. å¹³å°ç‰¹å®šç±»å‹
    // åœ¨ä¸åŒå¹³å°ä¸Šå¯èƒ½æœ‰ä¸åŒçš„å®ç°
    // +build windows
    // type Handle = syscall.Handle
    
    // +build !windows  
    // type Handle = int
}
```

#### 2.7.2 è‡ªå®šä¹‰ç±»å‹è¯¦è§£

è‡ªå®šä¹‰ç±»å‹åˆ›å»ºå…¨æ–°çš„ç±»å‹ï¼Œå³ä½¿åº•å±‚ç±»å‹ç›¸åŒä¹Ÿä¸èƒ½ç›´æ¥èµ‹å€¼ï¼š

```go
// è‡ªå®šä¹‰ç±»å‹å®šä¹‰
type UserID int
type UserName string
type Temperature float64
type Status int

// ä¸ºè‡ªå®šä¹‰ç±»å‹å®šä¹‰å¸¸é‡
const (
    StatusPending Status = iota
    StatusRunning
    StatusCompleted
    StatusFailed
)

func customTypeDemo() {
    var id UserID = 123
    var name UserName = "å¼ ä¸‰"
    var temp Temperature = 36.5
    
    // è‡ªå®šä¹‰ç±»å‹ä¸åŸç±»å‹ä¸åŒï¼Œéœ€è¦æ˜¾å¼è½¬æ¢
    var i int = int(id)           // éœ€è¦æ˜¾å¼è½¬æ¢
    var s string = string(name)   // éœ€è¦æ˜¾å¼è½¬æ¢
    var f float64 = float64(temp) // éœ€è¦æ˜¾å¼è½¬æ¢
    
    // åå‘è½¬æ¢ä¹Ÿéœ€è¦æ˜¾å¼è¿›è¡Œ
    id = UserID(456)
    name = UserName("æå››")
    temp = Temperature(37.2)
    
    fmt.Printf("è‡ªå®šä¹‰ç±»å‹: %T, %T, %T\n", id, name, temp)
}

// ä¸ºè‡ªå®šä¹‰ç±»å‹æ·»åŠ æ–¹æ³•
func (id UserID) String() string {
    return fmt.Sprintf("ç”¨æˆ·ID: %d", int(id))
}

func (id UserID) IsValid() bool {
    return id > 0
}

func (name UserName) IsEmpty() bool {
    return string(name) == ""
}

func (temp Temperature) IsFever() bool {
    return temp > 37.5
}

func (temp Temperature) Celsius() float64 {
    return float64(temp)
}

func (temp Temperature) Fahrenheit() float64 {
    return float64(temp)*9/5 + 32
}

func (s Status) String() string {
    switch s {
    case StatusPending:
        return "Pending"
    case StatusRunning:
        return "Running"
    case StatusCompleted:
        return "Completed"
    case StatusFailed:
        return "Failed"
    default:
        return "Unknown"
    }
}

// è‡ªå®šä¹‰ç±»å‹çš„é«˜çº§ç”¨æ³•
func advancedCustomTypes() {
    // 1. åŸºäºå¤åˆç±»å‹çš„è‡ªå®šä¹‰ç±»å‹
    type StringSlice []string
    type IntMap map[string]int
    type HandlerFunc func(string) error
    
    // ä¸ºåˆ‡ç‰‡ç±»å‹æ·»åŠ æ–¹æ³•
    func (ss StringSlice) Contains(s string) bool {
        for _, item := range ss {
            if item == s {
                return true
            }
        }
        return false
    }
    
    func (ss StringSlice) Join(sep string) string {
        return strings.Join([]string(ss), sep)
    }
    
    // ä¸ºæ˜ å°„ç±»å‹æ·»åŠ æ–¹æ³•
    func (im IntMap) Keys() []string {
        keys := make([]string, 0, len(im))
        for k := range im {
            keys = append(keys, k)
        }
        return keys
    }
    
    // ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹
    var names StringSlice = []string{"Alice", "Bob", "Charlie"}
    fmt.Printf("åŒ…å«Alice: %t\n", names.Contains("Alice"))
    fmt.Printf("è¿æ¥: %s\n", names.Join(", "))
    
    var scores IntMap = map[string]int{"Alice": 95, "Bob": 87}
    fmt.Printf("é”®åˆ—è¡¨: %v\n", scores.Keys())
}

// ç±»å‹åµŒå…¥å’Œç»„åˆ
func typeEmbedding() {
    // åŸºç¡€ç±»å‹
    type Person struct {
        Name string
        Age  int
    }
    
    func (p Person) Greet() string {
        return fmt.Sprintf("Hello, I'm %s", p.Name)
    }
    
    // åµŒå…¥ç±»å‹
    type Employee struct {
        Person    // åµŒå…¥Personç±»å‹
        ID       int
        Position string
    }
    
    // Employeeè‡ªåŠ¨è·å¾—Personçš„æ–¹æ³•
    emp := Employee{
        Person:   Person{Name: "Alice", Age: 30},
        ID:       1001,
        Position: "Engineer",
    }
    
    fmt.Printf("å‘˜å·¥ä¿¡æ¯: %+v\n", emp)
    fmt.Printf("é—®å€™: %s\n", emp.Greet())  // è°ƒç”¨åµŒå…¥ç±»å‹çš„æ–¹æ³•
    fmt.Printf("å§“å: %s\n", emp.Name)     // ç›´æ¥è®¿é—®åµŒå…¥ç±»å‹çš„å­—æ®µ
}
```

#### 2.7.3 ç±»å‹åˆ«å vs è‡ªå®šä¹‰ç±»å‹å¯¹æ¯”

```go
func aliasVsCustomType() {
    // ç±»å‹åˆ«å
    type StringAlias = string
    
    // è‡ªå®šä¹‰ç±»å‹
    type StringCustom string
    
    var s1 string = "hello"
    var s2 StringAlias = "world"
    var s3 StringCustom = "golang"
    
    // ç±»å‹åˆ«åå¯ä»¥ç›´æ¥èµ‹å€¼
    s1 = s2  // OK
    s2 = s1  // OK
    
    // è‡ªå®šä¹‰ç±»å‹éœ€è¦è½¬æ¢
    // s1 = s3  // ç¼–è¯‘é”™è¯¯
    s1 = string(s3)  // OKï¼Œéœ€è¦è½¬æ¢
    s3 = StringCustom(s1)  // OKï¼Œéœ€è¦è½¬æ¢
    
    // ç±»å‹æ£€æŸ¥
    fmt.Printf("s1ç±»å‹: %T\n", s1)  // string
    fmt.Printf("s2ç±»å‹: %T\n", s2)  // stringï¼ˆåˆ«åï¼‰
    fmt.Printf("s3ç±»å‹: %T\n", s3)  // main.StringCustomï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰
    
    // æ–¹æ³•é›†
    // ç±»å‹åˆ«åå…±äº«åŸç±»å‹çš„æ–¹æ³•é›†
    // è‡ªå®šä¹‰ç±»å‹æœ‰ç‹¬ç«‹çš„æ–¹æ³•é›†
}
```

**ğŸ“ é¢è¯•è¦ç‚¹ï¼š**
- ç±»å‹åˆ«åä¸åŸç±»å‹å®Œå…¨ç›¸åŒï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼
- è‡ªå®šä¹‰ç±»å‹æ˜¯æ–°ç±»å‹ï¼Œéœ€è¦æ˜¾å¼è½¬æ¢
- è‡ªå®šä¹‰ç±»å‹å¯ä»¥æœ‰è‡ªå·±çš„æ–¹æ³•é›†
- ç±»å‹åˆ«åä¸»è¦ç”¨äºç®€åŒ–å¤æ‚ç±»å‹åå’Œä¿æŒå…¼å®¹æ€§
- è‡ªå®šä¹‰ç±»å‹ç”¨äºåˆ›å»ºå…·æœ‰ç‰¹å®šè¡Œä¸ºçš„æ–°ç±»å‹
- ç±»å‹åµŒå…¥å¯ä»¥å®ç°ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœ

### 2.8 é¢è¯•è¦ç‚¹æ€»ç»“

#### 2.8.1 è¯­æ³•åŸºç¡€æ ¸å¿ƒè€ƒç‚¹

**1. GOè¯­è¨€çš„å¯è§æ€§è§„åˆ™**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šå¦‚ä½•æ§åˆ¶åŒ…çš„å¯¼å‡ºï¼Ÿ
package mypackage

var PublicVar = "å¯å¯¼å‡º"     // å¤§å†™å¼€å¤´ï¼Œå…¶ä»–åŒ…å¯è®¿é—®
var privateVar = "ä¸å¯å¯¼å‡º"  // å°å†™å¼€å¤´ï¼Œä»…åŒ…å†…å¯è§

type PublicStruct struct {
    PublicField  string  // å¯å¯¼å‡ºå­—æ®µ
    privateField string  // ç§æœ‰å­—æ®µ
}

func PublicFunc() {}    // å¯å¯¼å‡ºå‡½æ•°
func privateFunc() {}   // ç§æœ‰å‡½æ•°
```

**2. å˜é‡å£°æ˜çš„æœ€ä½³å®è·µ**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šä»€ä¹ˆæ—¶å€™ç”¨å“ªç§å£°æ˜æ–¹å¼ï¼Ÿ

// åŒ…çº§åˆ«ï¼šä½¿ç”¨var
var globalConfig = loadConfig()

func example() {
    // å‡½æ•°å†…ï¼šä¼˜å…ˆä½¿ç”¨çŸ­å£°æ˜
    name := "Alice"
    
    // éœ€è¦æ˜ç¡®ç±»å‹æ—¶ä½¿ç”¨var
    var timeout time.Duration = 30 * time.Second
    
    // é›¶å€¼æœ‰æ„ä¹‰æ—¶ä½¿ç”¨var
    var count int  // æ˜ç¡®è¡¨ç¤ºä»0å¼€å§‹
    
    // å£°æ˜ä½†ç¨åèµ‹å€¼æ—¶ä½¿ç”¨var
    var result string
    if condition {
        result = "success"
    }
}
```

**3. é›¶å€¼æœºåˆ¶çš„é‡è¦æ€§**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šGOçš„é›¶å€¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ
func zeroValueBenefits() {
    var slice []int        // nil sliceï¼Œä½†å¯ä»¥ç›´æ¥append
    slice = append(slice, 1, 2, 3)
    
    var m map[string]int   // nil mapï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼
    if m == nil {
        m = make(map[string]int)
    }
    
    var s string           // ç©ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
    s += "hello"
}
```

#### 2.8.2 æ•°æ®ç±»å‹æ·±åº¦è€ƒç‚¹

**1. æ•°å€¼ç±»å‹çš„é™·é˜±**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šè¿™äº›ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ
func numericTraps() {
    var a int8 = 127
    a++  // æº¢å‡ºï¼š-128
    
    var b uint8 = 255
    b++  // æº¢å‡ºï¼š0
    
    // æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
    fmt.Println(0.1 + 0.2 == 0.3)  // false
    
    // ç±»å‹è½¬æ¢æˆªæ–­
    var f float64 = 3.99
    var i int = int(f)  // 3ï¼Œä¸æ˜¯4
}
```

**2. å­—ç¬¦ä¸²çš„å†…å­˜æ¨¡å‹**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šå­—ç¬¦ä¸²çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
func stringInternals() {
    s := "hello"
    // å­—ç¬¦ä¸²å¤´éƒ¨ç»“æ„ï¼š
    // type StringHeader struct {
    //     Data uintptr  // æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆ
    //     Len  int      // é•¿åº¦
    // }
    
    // å­å­—ç¬¦ä¸²å…±äº«æ•°æ®
    sub := s[1:3]  // "el"ï¼Œå…±äº«åº•å±‚æ•°æ®
    
    // å­—ç¬¦ä¸²ä¸å¯å˜
    // s[0] = 'H'  // ç¼–è¯‘é”™è¯¯
    
    // æ­£ç¡®çš„ä¿®æ”¹æ–¹å¼
    runes := []rune(s)
    runes[0] = 'H'
    s = string(runes)
}
```

**3. rune vs byteçš„åŒºåˆ«**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šéå†å­—ç¬¦ä¸²çš„ä¸åŒæ–¹å¼
func stringIteration() {
    s := "Hello,ä¸–ç•Œ"
    
    // æŒ‰å­—èŠ‚éå†ï¼ˆå¯èƒ½æˆªæ–­UTF-8å­—ç¬¦ï¼‰
    for i := 0; i < len(s); i++ {
        fmt.Printf("%c ", s[i])  // å¯èƒ½ä¹±ç 
    }
    
    // æŒ‰å­—ç¬¦éå†ï¼ˆæ¨èï¼‰
    for _, r := range s {
        fmt.Printf("%c ", r)  // æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰å­—ç¬¦
    }
}
```

#### 2.8.3 ç±»å‹è½¬æ¢ä¸ç±»å‹å®‰å…¨

**1. æ˜¾å¼è½¬æ¢çš„å¿…è¦æ€§**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šä¸ºä»€ä¹ˆGOä¸æ”¯æŒéšå¼è½¬æ¢ï¼Ÿ
func explicitConversion() {
    var i int32 = 100
    var j int64 = 200
    
    // result := i + j  // ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…
    result := int64(i) + j  // å¿…é¡»æ˜¾å¼è½¬æ¢
    
    // å¥½å¤„ï¼šé¿å…æ„å¤–çš„ç²¾åº¦ä¸¢å¤±å’Œç±»å‹é”™è¯¯
}
```

**2. ç±»å‹æ–­è¨€çš„å®‰å…¨ä½¿ç”¨**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šå¦‚ä½•å®‰å…¨åœ°è¿›è¡Œç±»å‹æ–­è¨€ï¼Ÿ
func safeTypeAssertion() {
    var i interface{} = "hello"
    
    // ä¸å®‰å…¨çš„æ–¹å¼
    // s := i.(string)  // å¦‚æœæ–­è¨€å¤±è´¥ä¼španic
    
    // å®‰å…¨çš„æ–¹å¼
    if s, ok := i.(string); ok {
        fmt.Println("è½¬æ¢æˆåŠŸ:", s)
    }
    
    // ç±»å‹é€‰æ‹©
    switch v := i.(type) {
    case string:
        fmt.Println("å­—ç¬¦ä¸²:", v)
    case int:
        fmt.Println("æ•´æ•°:", v)
    default:
        fmt.Printf("æœªçŸ¥ç±»å‹: %T\n", v)
    }
}
```

#### 2.8.4 æŒ‡é’ˆä¸å†…å­˜ç®¡ç†

**1. æŒ‡é’ˆçš„å®‰å…¨ç‰¹æ€§**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šGOæŒ‡é’ˆä¸CæŒ‡é’ˆçš„åŒºåˆ«
func pointerSafety() {
    arr := [5]int{1, 2, 3, 4, 5}
    p := &arr[0]
    
    // GOä¸æ”¯æŒæŒ‡é’ˆè¿ç®—
    // p++  // ç¼–è¯‘é”™è¯¯
    // p = p + 1  // ç¼–è¯‘é”™è¯¯
    
    // ä¸èƒ½å°†æ•°å€¼è½¬æ¢ä¸ºæŒ‡é’ˆ
    // var p2 *int = (*int)(0x12345)  // ç¼–è¯‘é”™è¯¯
    
    // ç±»å‹å®‰å…¨
    var i int = 42
    var f float64 = 3.14
    // var pi *int = &f  // ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…
}
```

**2. å€¼ä¼ é€’ vs æŒ‡é’ˆä¼ é€’**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŒ‡é’ˆä¼ é€’ï¼Ÿ
func passingStrategies() {
    type LargeStruct struct {
        data [1000]int
    }
    
    // å¤§å‹ç»“æ„ä½“ï¼šä½¿ç”¨æŒ‡é’ˆä¼ é€’
    func processLarge(ls *LargeStruct) {
        // åªä¼ é€’8å­—èŠ‚æŒ‡é’ˆï¼Œè€Œä¸æ˜¯4000å­—èŠ‚æ•°æ®
    }
    
    // å°å‹å€¼ç±»å‹ï¼šä½¿ç”¨å€¼ä¼ é€’
    func processSmall(x int) {
        // ç®€å•ç±»å‹ç›´æ¥ä¼ å€¼
    }
    
    // éœ€è¦ä¿®æ”¹åŸå€¼ï¼šä½¿ç”¨æŒ‡é’ˆä¼ é€’
    func modify(x *int) {
        *x = 100
    }
}
```

#### 2.8.5 é«˜é¢‘é¢è¯•é¢˜

**1. new vs makeçš„åŒºåˆ«**
```go
// é¢è¯•å®˜å¿…é—®é¢˜ç›®
func newVsMake() {
    // newï¼šåˆ†é…é›¶å€¼å†…å­˜ï¼Œè¿”å›æŒ‡é’ˆ
    p := new(int)     // *intï¼ŒæŒ‡å‘é›¶å€¼
    s := new([]int)   // *[]intï¼ŒæŒ‡å‘nil slice
    
    // makeï¼šåˆå§‹åŒ–å¼•ç”¨ç±»å‹ï¼Œè¿”å›ç±»å‹æœ¬èº«
    slice := make([]int, 5)      // []intï¼Œé•¿åº¦ä¸º5çš„slice
    m := make(map[string]int)    // map[string]intï¼Œå·²åˆå§‹åŒ–çš„map
    ch := make(chan int)         // chan intï¼Œå·²åˆå§‹åŒ–çš„channel
}
```

**2. ç±»å‹åˆ«å vs è‡ªå®šä¹‰ç±»å‹**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šè¿™ä¸¤ç§å®šä¹‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
type StringAlias = string    // ç±»å‹åˆ«å
type StringCustom string     // è‡ªå®šä¹‰ç±»å‹

func aliasVsCustom() {
    var s1 string = "hello"
    var s2 StringAlias = "world"
    var s3 StringCustom = "golang"
    
    s1 = s2  // OKï¼šåˆ«åä¸åŸç±»å‹ç›¸åŒ
    // s1 = s3  // é”™è¯¯ï¼šè‡ªå®šä¹‰ç±»å‹éœ€è¦è½¬æ¢
    s1 = string(s3)  // OKï¼šæ˜¾å¼è½¬æ¢
}
```

**3. æ¥å£çš„ç©ºå€¼åˆ¤æ–­**
```go
// é¢è¯•å®˜å¯èƒ½é—®ï¼šè¿™ä¸ªåˆ¤æ–­æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ
func interfaceNilCheck() {
    var p *int
    var i interface{} = p
    
    fmt.Println(p == nil)  // true
    fmt.Println(i == nil)  // falseï¼æ¥å£åŒ…å«ç±»å‹ä¿¡æ¯
    
    // æ­£ç¡®çš„åˆ¤æ–­æ–¹å¼
    if i == nil || reflect.ValueOf(i).IsNil() {
        fmt.Println("çœŸæ­£çš„nil")
    }
}
```

### 2.9 å®è·µç»ƒä¹ 

#### 2.9.1 åŸºç¡€ç»ƒä¹ 

**ç»ƒä¹ 1ï¼šå˜é‡å£°æ˜å’Œåˆå§‹åŒ–**
```go
// ä»»åŠ¡ï¼šä½¿ç”¨ä¸åŒæ–¹å¼å£°æ˜å’Œåˆå§‹åŒ–å˜é‡
package main

import "fmt"

// TODO: åœ¨åŒ…çº§åˆ«å£°æ˜å…¨å±€å˜é‡
var (
    // å£°æ˜ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡å­˜å‚¨åº”ç”¨åç§°
    // å£°æ˜ä¸€ä¸ªæ•´æ•°å˜é‡å­˜å‚¨ç‰ˆæœ¬å·
    // å£°æ˜ä¸€ä¸ªå¸ƒå°”å˜é‡è¡¨ç¤ºæ˜¯å¦ä¸ºè°ƒè¯•æ¨¡å¼
)

func main() {
    // TODO: åœ¨å‡½æ•°å†…ä½¿ç”¨çŸ­å£°æ˜åˆ›å»ºå±€éƒ¨å˜é‡
    // åˆ›å»ºç”¨æˆ·å§“åã€å¹´é¾„ã€é‚®ç®±å˜é‡
    
    // TODO: ä½¿ç”¨varå£°æ˜ä½†ç¨åèµ‹å€¼
    // å£°æ˜ä¸€ä¸ªç»“æœå˜é‡ï¼Œæ ¹æ®æ¡ä»¶èµ‹ä¸åŒå€¼
    
    // TODO: æ‰¹é‡å£°æ˜å¤šä¸ªå˜é‡
    
    // æ‰“å°æ‰€æœ‰å˜é‡çš„å€¼å’Œç±»å‹
}
```

**ç»ƒä¹ 2ï¼šiotaæšä¸¾å™¨åº”ç”¨**
```go
// ä»»åŠ¡ï¼šè®¾è®¡ä¸€ä¸ªHTTPçŠ¶æ€ç ç³»ç»Ÿ
package main

// TODO: å®šä¹‰HTTPçŠ¶æ€ç æšä¸¾
type HTTPStatus int

const (
    // 1xx ä¿¡æ¯å“åº”
    // StatusContinue = 100 + iota
    
    // 2xx æˆåŠŸå“åº”  
    // StatusOK = 200 + iota
    
    // 4xx å®¢æˆ·ç«¯é”™è¯¯
    // StatusBadRequest = 400 + iota
    
    // 5xx æœåŠ¡å™¨é”™è¯¯
    // StatusInternalServerError = 500 + iota
)

// TODO: ä¸ºHTTPStatusæ·»åŠ String()æ–¹æ³•
func (s HTTPStatus) String() string {
    // å®ç°çŠ¶æ€ç åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢
}

// TODO: æ·»åŠ IsSuccess()æ–¹æ³•åˆ¤æ–­æ˜¯å¦ä¸ºæˆåŠŸçŠ¶æ€
func (s HTTPStatus) IsSuccess() bool {
    // å®ç°æˆåŠŸçŠ¶æ€åˆ¤æ–­ï¼ˆ2xxï¼‰
}
```

**ç»ƒä¹ 3ï¼šå­—ç¬¦ä¸²å¤„ç†å·¥å…·**
```go
// ä»»åŠ¡ï¼šå®ç°å­—ç¬¦ä¸²å¤„ç†å·¥å…·å‡½æ•°
package main

import (
    "strings"
    "unicode/utf8"
)

// TODO: å®ç°å­—ç¬¦ä¸²åè½¬å‡½æ•°ï¼ˆæ”¯æŒUTF-8ï¼‰
func reverseString(s string) string {
    // æç¤ºï¼šä½¿ç”¨[]runeå¤„ç†Unicodeå­—ç¬¦
}

// TODO: å®ç°å•è¯è®¡æ•°å‡½æ•°
func wordCount(s string) map[string]int {
    // ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯çš„å‡ºç°æ¬¡æ•°
}

// TODO: å®ç°å­—ç¬¦ä¸²å‹ç¼©å‡½æ•°
func compressString(s string) string {
    // ä¾‹å¦‚ï¼š"aaabbc" -> "a3b2c1"
    // å¦‚æœå‹ç¼©åé•¿åº¦ä¸å°äºåŸé•¿åº¦ï¼Œè¿”å›åŸå­—ç¬¦ä¸²
}

// TODO: å®ç°åˆ¤æ–­å›æ–‡å‡½æ•°ï¼ˆå¿½ç•¥å¤§å°å†™å’Œç©ºæ ¼ï¼‰
func isPalindrome(s string) bool {
    // ä¾‹å¦‚ï¼š"A man a plan a canal Panama" -> true
}
```

#### 2.9.2 è¿›é˜¶ç»ƒä¹ 

**ç»ƒä¹ 4ï¼šè‡ªå®šä¹‰ç±»å‹å’Œæ–¹æ³•**
```go
// ä»»åŠ¡ï¼šè®¾è®¡ä¸€ä¸ªæ¸©åº¦è½¬æ¢ç³»ç»Ÿ
package main

import "fmt"

// TODO: å®šä¹‰æ¸©åº¦ç±»å‹
type Temperature float64

// TODO: å®šä¹‰æ¸©åº¦å•ä½æšä¸¾
type Unit int

const (
    Celsius Unit = iota
    Fahrenheit
    Kelvin
)

// TODO: ä¸ºTemperatureæ·»åŠ è½¬æ¢æ–¹æ³•
func (t Temperature) ToCelsius() Temperature {
    // å‡è®¾å½“å‰æ¸©åº¦æ˜¯æ‘„æ°åº¦ï¼Œå®ç°åˆ°å…¶ä»–å•ä½çš„è½¬æ¢
}

func (t Temperature) ToFahrenheit() Temperature {
    // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C * 9/5 + 32
}

func (t Temperature) ToKelvin() Temperature {
    // æ‘„æ°åº¦è½¬å¼€å°”æ–‡ï¼šK = C + 273.15
}

// TODO: å®ç°æ¸©åº¦æ¯”è¾ƒæ–¹æ³•
func (t Temperature) IsFreezingPoint() bool {
    // åˆ¤æ–­æ˜¯å¦ä¸ºå†°ç‚¹ï¼ˆ0Â°Cï¼‰
}

func (t Temperature) IsBoilingPoint() bool {
    // åˆ¤æ–­æ˜¯å¦ä¸ºæ²¸ç‚¹ï¼ˆ100Â°Cï¼‰
}

// TODO: å®ç°Stringæ–¹æ³•
func (t Temperature) String() string {
    // æ ¼å¼åŒ–è¾“å‡ºï¼Œä¾‹å¦‚ï¼š"25.5Â°C"
}
```

**ç»ƒä¹ 5ï¼šæŒ‡é’ˆæ“ä½œå’Œå†…å­˜ç®¡ç†**
```go
// ä»»åŠ¡ï¼šå®ç°é“¾è¡¨æ•°æ®ç»“æ„
package main

// TODO: å®šä¹‰é“¾è¡¨èŠ‚ç‚¹
type ListNode struct {
    Value int
    Next  *ListNode
}

// TODO: å®šä¹‰é“¾è¡¨ç»“æ„
type LinkedList struct {
    Head *ListNode
    Size int
}

// TODO: å®ç°é“¾è¡¨æ–¹æ³•
func (ll *LinkedList) Append(value int) {
    // åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ èŠ‚ç‚¹
}

func (ll *LinkedList) Prepend(value int) {
    // åœ¨é“¾è¡¨å¼€å¤´æ·»åŠ èŠ‚ç‚¹
}

func (ll *LinkedList) Delete(value int) bool {
    // åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„èŠ‚ç‚¹ï¼Œè¿”å›æ˜¯å¦æˆåŠŸ
}

func (ll *LinkedList) Find(value int) *ListNode {
    // æŸ¥æ‰¾èŠ‚ç‚¹ï¼Œè¿”å›æŒ‡é’ˆ
}

func (ll *LinkedList) ToSlice() []int {
    // è½¬æ¢ä¸ºåˆ‡ç‰‡
}

// TODO: å®ç°å€¼äº¤æ¢å‡½æ•°
func swap(a, b *int) {
    // äº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼
}

// TODO: å®ç°æ·±æ‹·è´å‡½æ•°
func deepCopyList(original *LinkedList) *LinkedList {
    // åˆ›å»ºé“¾è¡¨çš„æ·±æ‹·è´
}
```

**ç»ƒä¹ 6ï¼šç±»å‹æ–­è¨€å’Œæ¥å£**
```go
// ä»»åŠ¡ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„æ•°æ®å¤„ç†å™¨
package main

import "fmt"

// TODO: å®šä¹‰å¤„ç†å™¨æ¥å£
type Processor interface {
    Process() string
}

// TODO: å®šä¹‰ä¸åŒçš„æ•°æ®ç±»å‹
type TextData struct {
    Content string
}

type NumberData struct {
    Value float64
}

type BoolData struct {
    Flag bool
}

// TODO: ä¸ºæ¯ç§ç±»å‹å®ç°Processæ–¹æ³•
func (td TextData) Process() string {
    // å¤„ç†æ–‡æœ¬æ•°æ®
}

func (nd NumberData) Process() string {
    // å¤„ç†æ•°å­—æ•°æ®
}

func (bd BoolData) Process() string {
    // å¤„ç†å¸ƒå°”æ•°æ®
}

// TODO: å®ç°é€šç”¨å¤„ç†å‡½æ•°
func processData(data interface{}) string {
    // ä½¿ç”¨ç±»å‹æ–­è¨€æˆ–ç±»å‹é€‰æ‹©å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®
    // å¦‚æœæ•°æ®å®ç°äº†Processoræ¥å£ï¼Œè°ƒç”¨Processæ–¹æ³•
    // å¦åˆ™è¿”å›é»˜è®¤æ ¼å¼
}

// TODO: å®ç°æ‰¹é‡å¤„ç†å‡½æ•°
func batchProcess(items []interface{}) []string {
    // æ‰¹é‡å¤„ç†å¤šç§ç±»å‹çš„æ•°æ®
}
```

#### 2.9.3 ç»¼åˆé¡¹ç›®ç»ƒä¹ 

**é¡¹ç›®ï¼šç®€å•è®¡ç®—å™¨**
```go
// ä»»åŠ¡ï¼šå®ç°ä¸€ä¸ªæ”¯æŒåŸºæœ¬è¿ç®—çš„è®¡ç®—å™¨
package main

// TODO: å®šä¹‰æ“ä½œç¬¦æšä¸¾
type Operator int

const (
    Add Operator = iota
    Subtract
    Multiply
    Divide
    Power
)

// TODO: å®šä¹‰è®¡ç®—å™¨ç»“æ„
type Calculator struct {
    history []string  // è®¡ç®—å†å²
}

// TODO: å®ç°è®¡ç®—æ–¹æ³•
func (c *Calculator) Calculate(a, b float64, op Operator) (float64, error) {
    // å®ç°åŸºæœ¬è¿ç®—ï¼Œå¤„ç†é™¤é›¶ç­‰é”™è¯¯æƒ…å†µ
}

// TODO: å®ç°è¡¨è¾¾å¼è§£æ
func (c *Calculator) ParseAndCalculate(expression string) (float64, error) {
    // è§£æå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¦‚ "3.5 + 2.1"
}

// TODO: å®ç°å†å²è®°å½•åŠŸèƒ½
func (c *Calculator) GetHistory() []string {
    // è¿”å›è®¡ç®—å†å²
}

func (c *Calculator) ClearHistory() {
    // æ¸…ç©ºå†å²è®°å½•
}
```

#### 2.9.4 æ€è€ƒé¢˜ä¸è®¨è®º

**1. è®¾è®¡æ€è€ƒé¢˜**
- ä¸ºä»€ä¹ˆGOè¯­è¨€ä¸æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Ÿè¿™æ ·è®¾è®¡çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ
- å­—ç¬¦ä¸²ä¸å¯å˜çš„è®¾è®¡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Ÿ
- ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŒ‡é’ˆä¼ é€’ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨å€¼ä¼ é€’ï¼Ÿå¦‚ä½•æƒè¡¡æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Ÿ

**2. æ€§èƒ½åˆ†æé¢˜**
```go
// åˆ†æä»¥ä¸‹ä»£ç çš„æ€§èƒ½é—®é¢˜å¹¶æå‡ºä¼˜åŒ–æ–¹æ¡ˆ
func inefficientStringConcat(strs []string) string {
    var result string
    for _, s := range strs {
        result += s  // é—®é¢˜åœ¨å“ªé‡Œï¼Ÿ
    }
    return result
}

// ä¼˜åŒ–ç‰ˆæœ¬åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ
```

**3. å†…å­˜æ³„æ¼åˆ†æ**
```go
// åˆ†æä»¥ä¸‹ä»£ç æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼é£é™©
func potentialMemoryLeak() {
    data := make([]byte, 1024*1024)  // 1MBæ•°æ®
    // å¤„ç†æ•°æ®...
    
    // åªéœ€è¦å‰100å­—èŠ‚
    result := data[:100]
    return result  // è¿™é‡Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ
}
```

**4. å¹¶å‘å®‰å…¨æ€è€ƒ**
```go
// æ€è€ƒï¼šä»¥ä¸‹ä»£ç åœ¨å¹¶å‘ç¯å¢ƒä¸‹æ˜¯å¦å®‰å…¨ï¼Ÿ
type Counter struct {
    value int
}

func (c *Counter) Increment() {
    c.value++  // è¿™ä¸ªæ“ä½œæ˜¯åŸå­çš„å—ï¼Ÿ
}

func (c *Counter) Get() int {
    return c.value  // è¿™ä¸ªæ“ä½œæ˜¯å®‰å…¨çš„å—ï¼Ÿ
}
```

#### 2.9.5 å­¦ä¹ å»ºè®®

1. **å¾ªåºæ¸è¿›**ï¼šä»åŸºç¡€ç»ƒä¹ å¼€å§‹ï¼Œé€æ­¥æŒ‘æˆ˜è¿›é˜¶é¢˜ç›®
2. **åŠ¨æ‰‹å®è·µ**ï¼šæ¯ä¸ªç»ƒä¹ éƒ½è¦äº²è‡ªç¼–å†™ä»£ç å¹¶è¿è¡Œæµ‹è¯•
3. **æ·±å…¥ç†è§£**ï¼šä¸ä»…è¦çŸ¥é“æ€ä¹ˆåšï¼Œæ›´è¦ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·åš
4. **æ€§èƒ½æ„è¯†**ï¼šåœ¨ç»ƒä¹ ä¸­åŸ¹å…»å¯¹æ€§èƒ½å’Œå†…å­˜çš„æ•æ„Ÿåº¦
5. **ä»£ç å®¡æŸ¥**ï¼šä¸åŒäº‹æˆ–æœ‹å‹äº’ç›¸å®¡æŸ¥ä»£ç ï¼Œå‘ç°é—®é¢˜
6. **æŒç»­æ”¹è¿›**ï¼šå®šæœŸå›é¡¾å’Œé‡æ„ä¹‹å‰å†™çš„ä»£ç 

---

**ä¸‹ä¸€ç« é¢„å‘Šï¼š** ç¬¬3ç« å°†å­¦ä¹ GOè¯­è¨€çš„æ§åˆ¶ç»“æ„ä¸å‡½æ•°ï¼ŒåŒ…æ‹¬æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥ã€å‡½æ•°å®šä¹‰ç­‰å†…å®¹ã€‚ 